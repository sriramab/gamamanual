<html><!-- Online page at https://github.com/gama-platform/gama/wiki/Tutorials/Tutorials/PredatorPrey/PredatorPrey_step12 --><head><meta charset="utf-8"><title>PredatorPrey_step12</title><script src="../../../../dash_resources/highlight.all.js"></script><link rel="stylesheet" type="text/css" href="../../../../dash_resources/github-markdown.css"><link rel="stylesheet" type="text/css" href="../../../../dash_resources/highlightjs.github.css"></head><body class="markdown-body" style="padding-bottom:20px; margin: 8px 13px;"><h1 id="predatorprey_step12">PredatorPrey_step12</h1>
<a class="dashAnchor" name="//apple_ref/Section/12.%20Image%20loading"></a><h1 id="12-image-loading">12. Image loading</h1>
<p>This 12th step illustrates how to load an image file and to use it to initialize a grid.</p>
<table><thead><tr></tr></thead><tbody><tr></tr><tr></tr><tr></tr><tr></tr></tbody></table><a class="dashAnchor" name="//apple_ref/Section/Formulation"></a><h2 id="formulation">Formulation</h2>
<ul>
<li>Building of the initial environment (food and foodProd of the cells) from a image file</li>
</ul>
<table><thead><tr></tr></thead><tbody><tr></tr><tr></tr><tr></tr></tbody></table><a class="dashAnchor" name="//apple_ref/Section/Model%20Definition"></a><h2 id="model-definition">Model Definition</h2>
<a class="dashAnchor" name="//apple_ref/Section/global%20variable"></a><h3 id="global-variable">global variable</h3>
<p>We add a new global variable: the image file:</p>
<pre><code class="hljs stata">    <span class="hljs-keyword"><span class="hljs-keyword">file</span></span> map_init &lt;- image_file(<span class="hljs-string"><span class="hljs-string">"../images/predator_prey_raster_map.png"</span></span>);
</code></pre>
<p>The image file is here: <img src="../../../../github.com/wiki/gama-platform/gama/Tutorials/Tutorials/PredatorPrey/resources/images/tutorials/predator_prey_raster_map.png" alt="images/predator_prey_raster_map.png"></p>
<p>You have to copy it in your project folder: images/</p>
<a class="dashAnchor" name="//apple_ref/Section/model%20initialization"></a><h3 id="model-initialization">model initialization</h3>
<p>In order to have a more complex environment, we want to use this image as the initialization of the environment. The food level available in a vegetation_cell will be based on the green level of the corresponding pixel in the image. You will be able to use such process to represent existing real environment in your model.
We modify the global init of the model in order to cast the image file in a matrix. We use for that the <strong>file as_matrix  {nb_cols, nb_lines}</strong> operator that allows to convert a file (image, csv) to a matrix composed of <strong>nb_cols</strong> columns and <strong>nb_lines</strong> lines.</p>
<p>Concerning the manipulation of matrix, it is possible to obtain the element [i,j] of a matrix by using <strong>my_matrix [i,j]</strong>.</p>
<p>A  grid can be view as spatial matrix: each cell of a grid has two built-in variables <strong>grid_x</strong> and <strong>grid_y</strong> that represent the column and line indexes of the cell.</p>
<pre><code class="hljs dns">  init {
      create prey number: nb_preys_init <span class="hljs-comment"><span class="hljs-comment">;</span></span>
      create predator number: nb_predators_init <span class="hljs-comment"><span class="hljs-comment">;</span></span>
      matrix init_data &lt;- map_init as_matrix {<span class="hljs-number"><span class="hljs-number">50</span></span>,<span class="hljs-number"><span class="hljs-number">50</span></span>}<span class="hljs-comment"><span class="hljs-comment">;</span></span>
      ask vegetation_cell {
         color &lt;- rgb (init_data[grid_x,grid_y]) <span class="hljs-comment"><span class="hljs-comment">;</span></span>
         food &lt;- <span class="hljs-number"><span class="hljs-number">1</span></span> - ((color as list)[<span class="hljs-number"><span class="hljs-number">0</span></span>] / <span class="hljs-number"><span class="hljs-number">255</span></span>) <span class="hljs-comment"><span class="hljs-comment">;</span></span>
         foodProd &lt;- food / <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-comment"><span class="hljs-comment">;</span></span>
      }
   }
</code></pre>
<a class="dashAnchor" name="//apple_ref/Section/Conclusion"></a><h2 id="conclusion">Conclusion</h2>
<p>Congratulations, you have complete your first GAMA models! Now, you know have enough knowledge to create many models that includes: dynamic grid-based environment, moving and interacting agents and the needed viusalization to make good use of your simulation. Feel free to use this knowledge to create your very own models! Or perhaps you want to continue your study with the more advanced <a href="https://github.com/wiki/gama-platform/gama/Tutorials/Tutorials/PredatorPrey/Tutorials.html">tutorials</a>?</p>
<a class="dashAnchor" name="//apple_ref/Section/Complete%20Model"></a><h2 id="complete-model">Complete Model</h2>
<pre><code class="hljs cs">model prey_predator

global {
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> nb_preys_init &lt;- <span class="hljs-number"><span class="hljs-number">200</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> nb_predators_init &lt;- <span class="hljs-number"><span class="hljs-number">20</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> prey_max_energy &lt;- <span class="hljs-number"><span class="hljs-number">1.0</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> prey_max_transfert &lt;- <span class="hljs-number"><span class="hljs-number">0.1</span></span> ;
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> prey_energy_consum &lt;- <span class="hljs-number"><span class="hljs-number">0.05</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> predator_max_energy &lt;- <span class="hljs-number"><span class="hljs-number">1.0</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> predator_energy_transfert &lt;- <span class="hljs-number"><span class="hljs-number">0.5</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> predator_energy_consum &lt;- <span class="hljs-number"><span class="hljs-number">0.02</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> prey_proba_reproduce &lt;- <span class="hljs-number"><span class="hljs-number">0.01</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> prey_nb_max_offsprings &lt;- <span class="hljs-number"><span class="hljs-number">5</span></span>; 
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> prey_energy_reproduce &lt;- <span class="hljs-number"><span class="hljs-number">0.5</span></span>; 
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> predator_proba_reproduce &lt;- <span class="hljs-number"><span class="hljs-number">0.01</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> predator_nb_max_offsprings &lt;- <span class="hljs-number"><span class="hljs-number">3</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> predator_energy_reproduce &lt;- <span class="hljs-number"><span class="hljs-number">0.5</span></span>;
    file map_init &lt;- image_file(<span class="hljs-string"><span class="hljs-string">"../images/predator_prey_raster_map.png"</span></span>);
    
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> nb_preys -&gt; {length (prey)};
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> nb_predators -&gt; {length (predator)};
    
    init {
        create prey number: nb_preys_init ; 
        create predator number: nb_predators_init ;
        ask vegetation_cell {
            color &lt;- rgb (map_init at {grid_x,grid_y}) ;
            food &lt;- <span class="hljs-number"><span class="hljs-number">1</span></span> - (((color <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> list)[<span class="hljs-number"><span class="hljs-number">0</span></span>]) / <span class="hljs-number"><span class="hljs-number">255</span></span>) ;
            foodProd &lt;- food / <span class="hljs-number"><span class="hljs-number">100</span></span> ; 
        }
    }
    
    reflex save_result <span class="hljs-keyword"><span class="hljs-keyword">when</span></span>: (nb_preys &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) and (nb_predators &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>){
        save (<span class="hljs-string"><span class="hljs-string">"cycle: "</span></span>+ cycle + <span class="hljs-string"><span class="hljs-string">"; nbPreys: "</span></span> + nb_preys
            + <span class="hljs-string"><span class="hljs-string">"; minEnergyPreys: "</span></span> + ((prey <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> list) min_of each.energy)
            + <span class="hljs-string"><span class="hljs-string">"; maxSizePreys: "</span></span> + ((prey <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> list) max_of each.energy) 
            + <span class="hljs-string"><span class="hljs-string">"; nbPredators: "</span></span> + nb_predators           
            + <span class="hljs-string"><span class="hljs-string">"; minEnergyPredators: "</span></span> + ((predator <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> list) min_of each.energy)          
            + <span class="hljs-string"><span class="hljs-string">"; maxSizePredators: "</span></span> + ((predator <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> list) max_of each.energy)) 
            to: <span class="hljs-string"><span class="hljs-string">"results.txt"</span></span> type: <span class="hljs-string"><span class="hljs-string">"text"</span></span> ;
    }
    
    reflex stop_simulation <span class="hljs-keyword"><span class="hljs-keyword">when</span></span>: (nb_preys = <span class="hljs-number"><span class="hljs-number">0</span></span>) or (nb_predators = <span class="hljs-number"><span class="hljs-number">0</span></span>) {
        <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> halt ;
    } 
}

species generic_species {
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> size &lt;- <span class="hljs-number"><span class="hljs-number">1.0</span></span>;
    rgb color  ;
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> max_energy;
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> max_transfert;
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> energy_consum;
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> proba_reproduce ;
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> nb_max_offsprings;
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> energy_reproduce;
    image_file my_icon;
    vegetation_cell myCell &lt;- one_of (vegetation_cell) ;
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> energy &lt;- (rnd(<span class="hljs-number"><span class="hljs-number">1000</span></span>) / <span class="hljs-number"><span class="hljs-number">1000</span></span>) * max_energy  update: energy - energy_consum max: max_energy ;
    
    init {
        location &lt;- myCell.location;
    }
        
    reflex basic_move {
        myCell &lt;- choose_cell();
        location &lt;- myCell.location; 
    } 
    
    vegetation_cell choose_cell {
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> nil;
    }
        
    reflex die <span class="hljs-keyword"><span class="hljs-keyword">when</span></span>: energy &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span> {
        <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> die ;
    }
    
    reflex reproduce <span class="hljs-keyword"><span class="hljs-keyword">when</span></span>: (energy &gt;= energy_reproduce) and (flip(proba_reproduce)) {
        <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> nb_offsprings &lt;- <span class="hljs-number"><span class="hljs-number">1</span></span> + rnd(nb_max_offsprings <span class="hljs-number"><span class="hljs-number">-1</span></span>);
        <span class="hljs-function"><span class="hljs-function">create </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">species</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">self</span></span></span><span class="hljs-function">) number: nb_offsprings </span></span>{
            myCell &lt;- myself.myCell ;
            location &lt;- myCell.location ;
            energy &lt;- myself.energy / nb_offsprings ;
        }
        energy &lt;- energy / nb_offsprings ;
    }
    
    aspect <span class="hljs-keyword"><span class="hljs-keyword">base</span></span> {
        <span class="hljs-function"><span class="hljs-function">draw </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">circle</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">size</span></span></span><span class="hljs-function">) color: color </span></span>;
    }
    aspect icon {
        draw my_icon size: <span class="hljs-number"><span class="hljs-number">2</span></span> * size ;
    }
    aspect info {
        <span class="hljs-function"><span class="hljs-function">draw </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">square</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">size</span></span></span><span class="hljs-function">) color: color </span></span>;
        <span class="hljs-function"><span class="hljs-function">draw </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">string</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">energy with_precision </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span></span><span class="hljs-function">) size: 3 color: #black </span></span>;
    }
}

species prey parent: generic_species {
    rgb color &lt;- <span class="hljs-meta"><span class="hljs-meta">#blue;</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> max_energy &lt;- prey_max_energy ;
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> max_transfert &lt;- prey_max_transfert ;
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> energy_consum &lt;- prey_energy_consum ;
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> proba_reproduce &lt;- prey_proba_reproduce ;
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> nb_max_offsprings &lt;- prey_nb_max_offsprings ;
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> energy_reproduce &lt;- prey_energy_reproduce ;
    file my_icon &lt;- file(<span class="hljs-string"><span class="hljs-string">"../images/predator_prey_sheep.png"</span></span>) ;
        
    reflex eat <span class="hljs-keyword"><span class="hljs-keyword">when</span></span>: myCell.food &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> {
        <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> energy_transfert &lt;- min([max_transfert, myCell.food]) ;
        myCell.food &lt;- myCell.food - energy_transfert ;
        energy &lt;- energy + energy_transfert ;
    }
    
    vegetation_cell choose_cell {
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (myCell.neighbours) with_max_of (each.food);
    }
}
    
species predator parent: generic_species {
    rgb color &lt;- <span class="hljs-meta"><span class="hljs-meta">#red ;</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> max_energy &lt;- predator_max_energy ;
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> energy_transfert &lt;- predator_energy_transfert ;
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> energy_consum &lt;- predator_energy_consum ;
    list&lt;prey&gt; reachable_preys update: <span class="hljs-function"><span class="hljs-function">prey </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">inside</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">myCell</span></span></span><span class="hljs-function">)</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> proba_reproduce &lt;- predator_proba_reproduce ;
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> nb_max_offsprings &lt;- predator_nb_max_offsprings ;
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> energy_reproduce &lt;- predator_energy_reproduce ;
    file my_icon &lt;- file(<span class="hljs-string"><span class="hljs-string">"../images/predator_prey_wolf.png"</span></span>) ;
    
    reflex eat <span class="hljs-keyword"><span class="hljs-keyword">when</span></span>: ! empty(reachable_preys) {
        <span class="hljs-function"><span class="hljs-function">ask </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">one_of</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">reachable_preys</span></span></span><span class="hljs-function">) </span></span>{
            <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> die ;
        }
        energy &lt;- energy + energy_transfert ;
    }
    
    vegetation_cell choose_cell {
        vegetation_cell myCell_tmp &lt;- shuffle(myCell.neighbours) first_with (!(empty (<span class="hljs-function"><span class="hljs-function">prey </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">inside</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">each</span></span></span><span class="hljs-function">))))</span></span>;
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> myCell_tmp != nil {
            <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> myCell_tmp;
        } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {
            <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> one_of (myCell.neighbours);
        } 
    }
}
    
grid vegetation_cell width: <span class="hljs-number"><span class="hljs-number">50</span></span> height: <span class="hljs-number"><span class="hljs-number">50</span></span> neighbours: <span class="hljs-number"><span class="hljs-number">4</span></span> {
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> maxFood &lt;- <span class="hljs-number"><span class="hljs-number">1.0</span></span> ;
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> foodProd &lt;- (rnd(<span class="hljs-number"><span class="hljs-number">1000</span></span>) / <span class="hljs-number"><span class="hljs-number">1000</span></span>) * <span class="hljs-number"><span class="hljs-number">0.01</span></span> ;
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> food &lt;- (rnd(<span class="hljs-number"><span class="hljs-number">1000</span></span>) / <span class="hljs-number"><span class="hljs-number">1000</span></span>) max: maxFood update: food + foodProd ;
    rgb color &lt;- rgb(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>(<span class="hljs-number"><span class="hljs-number">255</span></span> * (<span class="hljs-number"><span class="hljs-number">1</span></span> - food)), <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>(<span class="hljs-number"><span class="hljs-number">255</span></span> * (<span class="hljs-number"><span class="hljs-number">1</span></span> - food))) update: rgb(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>(<span class="hljs-number"><span class="hljs-number">255</span></span> * (<span class="hljs-number"><span class="hljs-number">1</span></span> - food)), <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>(<span class="hljs-number"><span class="hljs-number">255</span></span> *(<span class="hljs-number"><span class="hljs-number">1</span></span> - food))) ;
    list&lt;vegetation_cell&gt; neighbours  &lt;- (self neighbours_at <span class="hljs-number"><span class="hljs-number">2</span></span>); 
}

experiment prey_predator type: gui {
    parameter <span class="hljs-string"><span class="hljs-string">"Initial number of preys: "</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span>: nb_preys_init  min: <span class="hljs-number"><span class="hljs-number">0</span></span> max: <span class="hljs-number"><span class="hljs-number">1000</span></span> category: <span class="hljs-string"><span class="hljs-string">"Prey"</span></span> ;
    parameter <span class="hljs-string"><span class="hljs-string">"Prey max energy: "</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span>: prey_max_energy category: <span class="hljs-string"><span class="hljs-string">"Prey"</span></span> ;
    parameter <span class="hljs-string"><span class="hljs-string">"Prey max transfert: "</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span>: prey_max_transfert  category: <span class="hljs-string"><span class="hljs-string">"Prey"</span></span> ;
    parameter <span class="hljs-string"><span class="hljs-string">"Prey energy consumption: "</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span>: prey_energy_consum  category: <span class="hljs-string"><span class="hljs-string">"Prey"</span></span> ;
    parameter <span class="hljs-string"><span class="hljs-string">"Initial number of predators: "</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span>: nb_predators_init  min: <span class="hljs-number"><span class="hljs-number">0</span></span> max: <span class="hljs-number"><span class="hljs-number">200</span></span> category: <span class="hljs-string"><span class="hljs-string">"Predator"</span></span> ;
    parameter <span class="hljs-string"><span class="hljs-string">"Predator max energy: "</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span>: predator_max_energy category: <span class="hljs-string"><span class="hljs-string">"Predator"</span></span> ;
    parameter <span class="hljs-string"><span class="hljs-string">"Predator energy transfert: "</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span>: predator_energy_transfert  category: <span class="hljs-string"><span class="hljs-string">"Predator"</span></span> ;
    parameter <span class="hljs-string"><span class="hljs-string">"Predator energy consumption: "</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span>: predator_energy_consum  category: <span class="hljs-string"><span class="hljs-string">"Predator"</span></span> ;
    parameter <span class="hljs-string"><span class="hljs-string">'Prey probability reproduce: '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span>: prey_proba_reproduce category: <span class="hljs-string"><span class="hljs-string">'Prey'</span></span> ;
    parameter <span class="hljs-string"><span class="hljs-string">'Prey nb max offsprings: '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span>: prey_nb_max_offsprings category: <span class="hljs-string"><span class="hljs-string">'Prey'</span></span> ;
    parameter <span class="hljs-string"><span class="hljs-string">'Prey energy reproduce: '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span>: prey_energy_reproduce category: <span class="hljs-string"><span class="hljs-string">'Prey'</span></span> ;
    parameter <span class="hljs-string"><span class="hljs-string">'Predator probability reproduce: '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span>: predator_proba_reproduce category: <span class="hljs-string"><span class="hljs-string">'Predator'</span></span> ;
    parameter <span class="hljs-string"><span class="hljs-string">'Predator nb max offsprings: '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span>: predator_nb_max_offsprings category: <span class="hljs-string"><span class="hljs-string">'Predator'</span></span> ;
    parameter <span class="hljs-string"><span class="hljs-string">'Predator energy reproduce: '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span>: predator_energy_reproduce category: <span class="hljs-string"><span class="hljs-string">'Predator'</span></span> ;
    
    output {
        display main_display {
            grid vegetation_cell lines: <span class="hljs-meta"><span class="hljs-meta">#black ;</span></span>
            species prey aspect: icon ;
            species predator aspect: icon ;
        }
        display info_display {
            grid vegetation_cell lines: <span class="hljs-meta"><span class="hljs-meta">#black ;</span></span>
            species prey aspect: info ;
            species predator aspect: info ;
        }
        display Population_information refresh:every(<span class="hljs-number"><span class="hljs-number">5</span></span>) {
            chart <span class="hljs-string"><span class="hljs-string">"Species evolution"</span></span> type: series size: {<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">0.5</span></span>} position: {<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>} {
                data <span class="hljs-string"><span class="hljs-string">"number_of_preys"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: nb_preys color: <span class="hljs-meta"><span class="hljs-meta">#blue ;</span></span>
                data <span class="hljs-string"><span class="hljs-string">"number_of_predator"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: nb_predators color: <span class="hljs-meta"><span class="hljs-meta">#red ;</span></span>
            }
            chart <span class="hljs-string"><span class="hljs-string">"Prey Energy Distribution"</span></span> type: histogram background: rgb(<span class="hljs-string"><span class="hljs-string">"lightGray"</span></span>) size: {<span class="hljs-number"><span class="hljs-number">0.5</span></span>,<span class="hljs-number"><span class="hljs-number">0.5</span></span>} position: {<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0.5</span></span>} {
                data <span class="hljs-string"><span class="hljs-string">"]0;0.25]"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: <span class="hljs-function"><span class="hljs-function">prey </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">count</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">each.energy &lt;= </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.25</span></span></span></span></span><span class="hljs-function">) color:#blue</span></span>;
                data <span class="hljs-string"><span class="hljs-string">"]0.25;0.5]"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: <span class="hljs-function"><span class="hljs-function">prey </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">count</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(each.energy &gt; </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.25</span></span></span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">and</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">each.energy &lt;= </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.5</span></span></span></span></span><span class="hljs-function">)) color:#blue</span></span>;
                data <span class="hljs-string"><span class="hljs-string">"]0.5;0.75]"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: <span class="hljs-function"><span class="hljs-function">prey </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">count</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(each.energy &gt; </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.5</span></span></span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">and</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">each.energy &lt;= </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.75</span></span></span></span></span><span class="hljs-function">)) color:#blue</span></span>;
                data <span class="hljs-string"><span class="hljs-string">"]0.75;1]"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: <span class="hljs-function"><span class="hljs-function">prey </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">count</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">each.energy &gt; </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.75</span></span></span></span></span><span class="hljs-function">) color:#blue</span></span>;
            }
            chart <span class="hljs-string"><span class="hljs-string">"Predator Energy Distribution"</span></span> type: histogram background: rgb(<span class="hljs-string"><span class="hljs-string">"lightGray"</span></span>) size: {<span class="hljs-number"><span class="hljs-number">0.5</span></span>,<span class="hljs-number"><span class="hljs-number">0.5</span></span>} position: {<span class="hljs-number"><span class="hljs-number">0.5</span></span>, <span class="hljs-number"><span class="hljs-number">0.5</span></span>} {
                data <span class="hljs-string"><span class="hljs-string">"]0;0.25]"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: <span class="hljs-function"><span class="hljs-function">predator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">count</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">each.energy &lt;= </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.25</span></span></span></span></span><span class="hljs-function">) color: #red </span></span>;
                data <span class="hljs-string"><span class="hljs-string">"]0.25;0.5]"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: <span class="hljs-function"><span class="hljs-function">predator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">count</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(each.energy &gt; </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.25</span></span></span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">and</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">each.energy &lt;= </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.5</span></span></span></span></span><span class="hljs-function">)) color: #red </span></span>;
                data <span class="hljs-string"><span class="hljs-string">"]0.5;0.75]"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: <span class="hljs-function"><span class="hljs-function">predator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">count</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(each.energy &gt; </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.5</span></span></span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">and</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">each.energy &lt;= </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.75</span></span></span></span></span><span class="hljs-function">)) color: #red </span></span>;
                data <span class="hljs-string"><span class="hljs-string">"]0.75;1]"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: <span class="hljs-function"><span class="hljs-function">predator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">count</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">each.energy &gt; </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.75</span></span></span></span></span><span class="hljs-function">) color: #red</span></span>;
            }
        }
        monitor <span class="hljs-string"><span class="hljs-string">"Number of preys"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: nb_preys;
        monitor <span class="hljs-string"><span class="hljs-string">"Number of predators"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: nb_predators;
    }
}
</code></pre>
<script>hljs.initHighlightingOnLoad();</script></body></html>