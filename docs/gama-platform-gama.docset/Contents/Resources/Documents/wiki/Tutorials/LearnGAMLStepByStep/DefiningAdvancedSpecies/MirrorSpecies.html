<html><!-- Online page at https://github.com/gama-platform/gama/wiki/Tutorials/LearnGAMLStepByStep/DefiningAdvancedSpecies/MirrorSpecies --><head><meta charset="utf-8"><title>MirrorSpecies</title><script src="../../../../dash_resources/highlight.all.js"></script><link rel="stylesheet" type="text/css" href="../../../../dash_resources/github-markdown.css"><link rel="stylesheet" type="text/css" href="../../../../dash_resources/highlightjs.github.css"></head><body class="markdown-body" style="padding-bottom:20px; margin: 8px 13px;"><h1 id="mirrorspecies">MirrorSpecies</h1>
<a class="dashAnchor" name="//apple_ref/Section/Mirror%20species"></a><h1 id="mirror-species">Mirror species</h1>
<p>A mirror species is a species whose population is automatically managed with respect to another species. Whenever an agent is created or destroyed from the other species, an instance of the mirror species is created or destroyed. Each of these 'mirror agents' has access to its reference agent (called its target).
Mirror species can be used in different situations but the one we describe here is more oriented towards visualization purposes.</p>
<a class="dashAnchor" name="//apple_ref/Section/Index"></a><h2 id="index">Index</h2>
<ul>
<li><a href="#declaration">Declaration</a></li>
<li><a href="#example">Example</a></li>
</ul>
<a class="dashAnchor" name="//apple_ref/Section/Declaration"></a><h2 id="declaration">Declaration</h2>
<p>A mirror species can be defined using the <code>mirrors</code> keyword as following:</p>
<pre><code class="hljs dust"><span class="xml"><span class="xml">species B mirrors: A</span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{
}</span></span><span class="xml"><span class="xml">
</span></span></code></pre>
<p>In this case the species B mirrors the species A.</p>
<p>By default the location of the species B will be random but in many cases, once want to place the mirror agent at the same location of the reference species. This can be achieve by simply adding the following lines in the mirror species : </p>
<pre><code class="hljs crmsh">species B mirrors: A{
    point <span class="hljs-keyword"><span class="hljs-keyword">location</span></span> <span class="hljs-title"><span class="hljs-title">&lt;- target</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">location</span></span> <span class="hljs-title"><span class="hljs-title">update</span></span>: target.location;
}
</code></pre>
<p><strong><code>target</code></strong> is a built-in attribute of a mirror species. It refers to the instance of the species tracked.</p>
<p>In the same spirit any attribute of a reference species can be reach using the same syntax. For instance if the species A has an attribute called <code>attribute1</code> of type <code>int</code> is is possible to get this attribute from the mirror species B using the following syntax: </p>
<pre><code class="hljs irpf90"><span class="hljs-built_in"><span class="hljs-built_in">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> &lt;- <span class="hljs-keyword"><span class="hljs-keyword">target</span></span>.attribute1;
</code></pre>
<a class="dashAnchor" name="//apple_ref/Section/Example"></a><h2 id="example">Example</h2>
<p>To practice a bit with the mirror notion, we will now build a simple model displaying a species A (aspect: white circle) moving randomly, and another species B (aspect: blue sphere) with the species A location on x and y, with an upper value for the z axis.</p>
<p><img src="../../../../github.com/wiki/gama-platform/gama/Tutorials/LearnGAMLStepByStep/DefiningAdvancedSpecies/resources/images/definingAdvancedSpecies/mirror_model.png" alt="images/mirror_model.png"></p>
<p>Here is an example of implementation for this model:</p>
<pre><code class="hljs roboconf">model Mirror

global {
  <span class="hljs-attribute"><span class="hljs-attribute">init{
    create A number</span></span>:100;    
  }
}

species A skills:[moving]{
    <span class="hljs-attribute"><span class="hljs-attribute">reflex update{
        do wander;
    }
    aspect base{
        draw circle(1) color</span></span>: #white;
    }
}
species B mirrors: A{
    <span class="hljs-attribute"><span class="hljs-attribute">point location &lt;- target.location update</span></span>: point(target<span class="hljs-variable"><span class="hljs-variable">.location</span></span><span class="hljs-variable"><span class="hljs-variable">.x</span></span>,target<span class="hljs-variable"><span class="hljs-variable">.location</span></span><span class="hljs-variable"><span class="hljs-variable">.y</span></span>,target<span class="hljs-variable"><span class="hljs-variable">.location</span></span><span class="hljs-variable"><span class="hljs-variable">.z</span></span>+5);
    <span class="hljs-attribute"><span class="hljs-attribute">aspect base {
        draw sphere(2) color</span></span>: #blue;
    }
}

experiment mirroExp type: gui {
    <span class="hljs-attribute"><span class="hljs-attribute">output {
        display superposedView type</span></span>: opengl{ 
          species A aspect: base;
          <span class="hljs-attribute"><span class="hljs-attribute">species B aspect</span></span>: base transparency:0.5;
        }
    }
}
</code></pre>
<script>hljs.initHighlightingOnLoad();</script></body></html>