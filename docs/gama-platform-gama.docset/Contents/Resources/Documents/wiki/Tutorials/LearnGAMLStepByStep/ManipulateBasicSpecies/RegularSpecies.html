<html><!-- Online page at https://github.com/gama-platform/gama/wiki/Tutorials/LearnGAMLStepByStep/ManipulateBasicSpecies/RegularSpecies --><head><meta charset="utf-8"><title>RegularSpecies</title><script src="../../../../dash_resources/highlight.all.js"></script><link rel="stylesheet" type="text/css" href="../../../../dash_resources/github-markdown.css"><link rel="stylesheet" type="text/css" href="../../../../dash_resources/highlightjs.github.css"></head><body class="markdown-body" style="padding-bottom:20px; margin: 8px 13px;"><h1 id="regularspecies">RegularSpecies</h1>
<a class="dashAnchor" name="//apple_ref/Section/Regular%20species"></a><h1 id="regular-species">Regular species</h1>
<p>Regular species are composed of attributes, actions, reflex, aspect etc... They describes the behavior of our agents. You can instantiate as much as you want agents from a regular species, and you can define as much as you want different regular species. You can see a species as a "class" in OOP.</p>
<a class="dashAnchor" name="//apple_ref/Section/Index"></a><h2 id="index">Index</h2>
<ul>
<li><a href="#declaration">Declaration</a></li>
<li><a href="#built-in-attributes">Built-in Attributes</a></li>
<li><a href="#built-in-actions">Built-in Actions</a></li>
<li><a href="#the-init-statement">The init statement</a></li>
<li><a href="#the-aspect-statement">The aspect statement</a></li>
<li><a href="#instantiate-an-agent">Instantiate an agent</a></li>
</ul>
<a class="dashAnchor" name="//apple_ref/Section/Declaration"></a><h2 id="declaration">Declaration</h2>
<p>The regular species declaration starts with the keyword <code>species</code> followed by the name (or followed by the facet <code>name:</code>) :</p>
<pre><code class="hljs dust"><span class="xml"><span class="xml">species my_specie </span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{
}</span></span><span class="xml"><span class="xml">
</span></span></code></pre>
<p>or:</p>
<pre><code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">species</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">name</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:my_specie</span></span> {
}
</code></pre>
<p>Directly in the "species" scope, you have to declare all your attributes (or "member" in OOP). You declare them exactly the way you declare basic variables. Those attributes are accessible wherever you want inside the species scope.</p>
<pre><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">species</span></span> my_specie {
    <span class="hljs-attribute"><span class="hljs-attribute">int</span></span> variableA;
}
</code></pre>
<a class="dashAnchor" name="//apple_ref/Section/Built-in%20attributes"></a><h2 id="built-in-attributes">Built-in attributes</h2>
<p>As for the global species, some attributes exist already by default in a regular species. Here is the list of built-in attributes:</p>
<ul>
<li><strong>name</strong> (type: string) is used to name your agent. By default, the name is equal to the name of your species + an incremental number. This name is the one visible on the species inspector.</li>
<li><strong>location</strong> (type: point) is used to control the position of your agent. It refers to the center of the envelop of the shape associated to the agent.</li>
<li><strong>shape</strong> (type: geometry) is used to describe the geometry of your agent. If you want to use some intersection operator between agents for instance, it is this geometry that is computed (nb : it can be totally different from the aspect you want to display for your agent !). By default, the shape is a point.</li>
<li><strong>host</strong> (type: agent) is used when your agent is part of another agent. We will see this concept a bit further, in the topic <a href="https://github.com/wiki/gama-platform/gama/Tutorials/LearnGAMLStepByStep/ManipulateBasicSpecies/MultiLevelArchitecture.html">multi-level architecture</a>.</li>
</ul>
<p>All those 4 built-in attributes can be accessed in both reading and writing very easily:</p>
<pre><code class="hljs mipsasm">species my_species {
    init {
        name &lt;- <span class="hljs-string"><span class="hljs-string">"custom_name"</span></span><span class="hljs-comment"><span class="hljs-comment">;</span></span>
        location &lt;- {<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>}<span class="hljs-comment"><span class="hljs-comment">;</span></span>
        <span class="hljs-keyword"><span class="hljs-keyword">shape </span></span>&lt;- rectangle(<span class="hljs-number"><span class="hljs-number">5</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>)<span class="hljs-comment"><span class="hljs-comment">;</span></span>
    }
}
</code></pre>
<p>All those built-in attributes are attributes of an agent (an instance of a species). Species has also their own attributes, which can be accessed with the following syntax (read only) :</p>
<pre><code class="hljs stylus">name_of_your_species<span class="hljs-selector-class"><span class="hljs-selector-class">.attribute_you_want</span></span>
</code></pre>
<p>Notice that the world agent is also an agent ! It has all the built-in attributes declared above. The world agent is defined inside the <code>global</code> scope. From the <code>global</code> scope then, you can for example access to the center of the envelop of the world shape :</p>
<pre><code class="hljs dts"><span class="hljs-class"><span class="hljs-class">global
</span></span>{
    <span class="hljs-class"><span class="hljs-class">init </span></span>{
        write location; <span class="hljs-comment"><span class="hljs-comment">// writes {50.0,50.0,0.0}</span></span>
    }
}
</code></pre>
<p>Here is the list of those attributes:</p>
<ul>
<li><strong>name</strong> (type: string) returns the name of your species</li>
<li><strong>attributes</strong> (type: list of string) returns the list of the names of the attributes of your species</li>
<li><strong>population</strong> (type: list) returns the list of agent that belong to it </li>
<li><strong>subspecies</strong> (type: list of string) returns the list of species that inherit directly from this species (we will talk about the concept of <a href="Inheritance.html">inheritance</a> later)</li>
<li><strong>parent</strong> (type: species) returns its parent species if it belongs to the model, or <code>nil</code> otherwise (we will talk about the concept of <a href="Inheritance.html">inheritance</a> later)</li>
</ul>
<a class="dashAnchor" name="//apple_ref/Section/Built-in%20action"></a><h2 id="built-in-action">Built-in action</h2>
<p>Some actions are define by default for a minimal agent. We already saw quickly the action <code>write</code>, used to display a message in the console.
Another very useful built-in action is the action <code>die</code>, used to destroy an agent.</p>
<pre><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">species</span></span> my_species{
    <span class="hljs-attribute"><span class="hljs-attribute">reflex</span></span> being_killed {
        <span class="hljs-attribute"><span class="hljs-attribute">do</span></span> die;
    }
}
</code></pre>
<p>Here is the list of the other built-in actions which you can find in the documentation: debug, message, tell.</p>
<a class="dashAnchor" name="//apple_ref/Section/The%20init%20statement"></a><h2 id="the-init-statement">The init statement</h2>
<p>After declaring all the attributes of your species, you can define an initial state (before launching the simulation). It can be seen as the "constructor of the class" in OOP.</p>
<pre><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">species</span></span> my_species {
    <span class="hljs-attribute"><span class="hljs-attribute">int</span></span> variableA;
    <span class="hljs-section"><span class="hljs-section">init</span></span> {
        <span class="hljs-attribute"><span class="hljs-attribute">variableA</span></span> &lt;- <span class="hljs-number"><span class="hljs-number">5</span></span>;
    }
}
</code></pre>
<a class="dashAnchor" name="//apple_ref/Section/The%20aspect%20statement"></a><h2 id="the-aspect-statement">The aspect statement</h2>
<p>Inside each species, you can define one or several aspects. This scope allows you to define how you want your species to be represented in the simulation.
Each aspect has a special name (so that they can be called from the experiment). Once again, you can name your aspect by using the facet <code>name:</code>, or simply by naming it just after the <code>aspect</code> keyword.</p>
<pre><code class="hljs aspectj">species my_species {
    <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">aspect</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">standard_aspect</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// or "aspect name:standard_aspect"</span></span>
    }
}
</code></pre>
<p>You can then define your aspect by using the statement <code>draw</code>. You can then choose a geometry for your aspect (facet <code>geometry</code>), a color (facet <code>color</code>), an image (facet <code>image</code>), a text (facet <code>text</code>)... We invite you to read the documentation about the draw statement to know more about.</p>
<pre><code class="hljs less"><span class="hljs-selector-tag"><span class="hljs-selector-tag">species</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">name</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:my_species</span></span> {
    <span class="hljs-selector-tag"><span class="hljs-selector-tag">aspect</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">name</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:standard_aspect</span></span> {
        draw <span class="hljs-attribute"><span class="hljs-attribute">geometry</span></span>:circle(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>:#blue;
    }
}
</code></pre>
<p>In the experiment scope, you have to tell the program to display a particular species with a particular aspect (nb : you can also choose to display your species with several aspect in the same display). </p>
<pre><code class="hljs less"><span class="hljs-selector-tag"><span class="hljs-selector-tag">experiment</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">my_experiment</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">type</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:gui</span></span>
{
    <span class="hljs-selector-tag"><span class="hljs-selector-tag">output</span></span>{
        <span class="hljs-selector-tag"><span class="hljs-selector-tag">display</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">my_display</span></span> {
            species my_species <span class="hljs-attribute"><span class="hljs-attribute">aspect</span></span>:standard_aspect;
        }
    }
}
</code></pre>
<p>Now there is only one thing missing to display our agent: we have to instantiate them.</p>
<a class="dashAnchor" name="//apple_ref/Section/Instantiate%20an%20agent"></a><h2 id="instantiate-an-agent">Instantiate an agent</h2>
<p>As already said quickly in the last session, the instantiation of the agents is most often in the init scope of the global species (this is not mandatory of course. You can instantiate your agents from an action / behavior of any specie). Use the statement <code>create</code> to instantiate an agent. 
The facet species is used to specify which species you want to instantiate. 
The facet number is used to tell how many instantiation you want. 
The facet with is used to specify some default values for some attributes of your instance. For example, you can specify the location.</p>
<pre><code class="hljs less"><span class="hljs-selector-tag"><span class="hljs-selector-tag">global</span></span>{
    <span class="hljs-selector-tag"><span class="hljs-selector-tag">init</span></span>{
        <span class="hljs-selector-tag"><span class="hljs-selector-tag">create</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">species</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:my_species</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">number</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">with</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:(location</span></span>:{0,0},<span class="hljs-attribute"><span class="hljs-attribute">vA</span></span>:<span class="hljs-number"><span class="hljs-number">8</span></span>);
    }
}


<span class="hljs-selector-tag"><span class="hljs-selector-tag">species</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">name</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:my_specie</span></span> {
    int vA;
}
</code></pre>
<p>Here is an example of model that display an agent with a circle aspect in the center of the environment:</p>
<pre><code class="hljs xquery">model display_one_agent

global{
    float worldDimension &lt;- <span class="hljs-number"><span class="hljs-number">50</span></span>#m;
    geometry shape &lt;- square(worldDimension);
    init{
        point center &lt;- {(worldDimension/<span class="hljs-number"><span class="hljs-number">2</span></span>),(worldDimension/<span class="hljs-number"><span class="hljs-number">2</span></span>)};
        create species:my_species number:<span class="hljs-number"><span class="hljs-number">1</span></span> with:(location:center);
    }
}

species name:my_species {
    aspect name:standard_aspect {
        draw geometry:circle(<span class="hljs-number"><span class="hljs-number">1</span></span>#m);
    }
}

experiment my_experiment type:gui
{
    output{
        display myDisplay {
            species my_species aspect:standard_aspect;
        }
    }
}
</code></pre>
<script>hljs.initHighlightingOnLoad();</script></body></html>