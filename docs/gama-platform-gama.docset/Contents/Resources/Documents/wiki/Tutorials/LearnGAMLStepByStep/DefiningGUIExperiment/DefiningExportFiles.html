<html><!-- Online page at https://github.com/gama-platform/gama/wiki/Tutorials/LearnGAMLStepByStep/DefiningGUIExperiment/DefiningExportFiles --><head><meta charset="utf-8"><title>DefiningExportFiles</title><script src="../../../../dash_resources/highlight.all.js"></script><link rel="stylesheet" type="text/css" href="../../../../dash_resources/github-markdown.css"><link rel="stylesheet" type="text/css" href="../../../../dash_resources/highlightjs.github.css"></head><body class="markdown-body" style="padding-bottom:20px; margin: 8px 13px;"><h1 id="definingexportfiles">DefiningExportFiles</h1>
<a class="dashAnchor" name="//apple_ref/Section/Defining%20export%20files"></a><h1 id="defining-export-files">Defining export files</h1>
<a class="dashAnchor" name="//apple_ref/Section/Index"></a><h2 id="index">Index</h2>
<ul>
<li><a href="#the-save-statement">The Save Statement</a></li>
<li><a href="#export-files-in-experiment">Export files in experiment</a></li>
<li><a href="#autosave">Autosave</a></li>
</ul>
<a class="dashAnchor" name="//apple_ref/Section/The%20Save%20Statement"></a><h2 id="the-save-statement">The Save Statement</h2>
<p>Allows to save data in a file. The type of file can be "shp", "text" or "csv". The <strong><code>save</code></strong> statement can be use in an init block, a reflex, an action or in a user command. Do not use it in experiments.</p>
<a class="dashAnchor" name="//apple_ref/Section/Facets"></a><h3 id="facets">Facets</h3>
<ul>
<li><strong><code>to</code></strong> (string): an expression that evaluates to an string, the path to the file
<ul>
<li><code>data</code> (any type), (omissible) : any expression, that will be saved in the file</li>
<li><code>crs</code> (any type): the name of the projectsion, e.g. crs:"EPSG:4326" or its EPSG id, e.g. crs:4326. Here a list of the CRS codes (and EPSG id): <a href="http://spatialreference.org/">http://spatialreference.org</a></li>
<li><code>rewrite</code> (boolean): an expression that evaluates to a boolean, specifying whether the save will ecrase the file or append data at the end of it</li>
<li><code>type</code> (an identifier): an expression that evaluates to an string, the type of the output file (it can be only "shp", "text" or "csv")</li>
<li><code>with</code> (map):  </li>
</ul>
</li>
</ul>
<a class="dashAnchor" name="//apple_ref/Section/Usages"></a><h3 id="usages">Usages</h3>
<ul>
<li>Its simple syntax is:</li>
</ul>
<pre><code class="hljs irpf90"><span class="hljs-keyword"><span class="hljs-keyword">save</span></span> <span class="hljs-keyword"><span class="hljs-keyword">data</span></span> to: output_file <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: a_type_file;
</code></pre>
<ul>
<li>To save data in a text file:</li>
</ul>
<pre><code class="hljs stata"><span class="hljs-keyword"><span class="hljs-keyword">save</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(cycle) + <span class="hljs-string"><span class="hljs-string">"-&gt;"</span></span>  + name + <span class="hljs-string"><span class="hljs-string">":"</span></span> + location) to: <span class="hljs-string"><span class="hljs-string">"save_data.txt"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-string"><span class="hljs-string">"text"</span></span>;
</code></pre>
<ul>
<li>To save the values of some attributes of the current agent in csv file:</li>
</ul>
<pre><code class="hljs sqf">save [<span class="hljs-built_in"><span class="hljs-built_in">name</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">location</span></span>, host] <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>: <span class="hljs-string"><span class="hljs-string">"save_data.csv"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">type</span></span>: <span class="hljs-string"><span class="hljs-string">"csv"</span></span>;
</code></pre>
<ul>
<li>To save the geometries of all the agents of a species into a shapefile (with optional attributes):</li>
</ul>
<pre><code class="hljs groovy">save species_of(self) <span class="hljs-string"><span class="hljs-string">to:</span></span> <span class="hljs-string"><span class="hljs-string">"save_shapefile.shp"</span></span> <span class="hljs-string"><span class="hljs-string">type:</span></span> <span class="hljs-string"><span class="hljs-string">"shp"</span></span> <span class="hljs-string"><span class="hljs-string">with:</span></span> [<span class="hljs-string"><span class="hljs-string">name:</span></span>:<span class="hljs-string"><span class="hljs-string">"nameAgent"</span></span>, <span class="hljs-string"><span class="hljs-string">location:</span></span>:<span class="hljs-string"><span class="hljs-string">"locationAgent"</span></span>] <span class="hljs-string"><span class="hljs-string">crs:</span></span> <span class="hljs-string"><span class="hljs-string">"EPSG:4326"</span></span>;
</code></pre>
<a class="dashAnchor" name="//apple_ref/Section/Export%20files%20in%20experiment"></a><h2 id="export-files-in-experiment">Export files in experiment</h2>
<p>Displays are not the only output you can manage in GAMA. Saving data to a file during an experiment can also be achieved in several ways, depending on the needs of the modeler. One way is provided by the <code>save</code> statement, which can be used everywhere in a model or a species. The other way, described here, is to include an <strong><code>output_file</code></strong> statement in the output section.</p>
<pre><code class="hljs groovy">output_file <span class="hljs-string"><span class="hljs-string">name:</span></span><span class="hljs-string"><span class="hljs-string">"file_name"</span></span> <span class="hljs-string"><span class="hljs-string">type:</span></span>file_type <span class="hljs-string"><span class="hljs-string">data:</span></span>data_to_write; 
</code></pre>
<p>with:</p>
<p><code>file_type</code>: text, csv or xml
<code>file_name</code>: string
<code>data_to_write</code>: string</p>
<a class="dashAnchor" name="//apple_ref/Section/Example:"></a><h3 id="example">Example:</h3>
<pre><code class="hljs applescript"><span class="hljs-built_in"><span class="hljs-built_in">file</span></span> <span class="hljs-built_in"><span class="hljs-built_in">name</span></span>: <span class="hljs-string"><span class="hljs-string">"results"</span></span> type: <span class="hljs-built_in"><span class="hljs-built_in">text</span></span> data: <span class="hljs-built_in"><span class="hljs-built_in">time</span></span> + <span class="hljs-string"><span class="hljs-string">"; "</span></span> + nb_preys + <span class="hljs-string"><span class="hljs-string">";"</span></span> + nb_predators refresh:<span class="hljs-keyword"><span class="hljs-keyword">every</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>);  
</code></pre>
<p>Each time step (or according to the frequency defined in the <code>refresh</code> facet of the file output), a new line will be added at the end of the file. If <code>rewrite: false</code> is defined in its facets, a new file will be created for each simulation (identified by a timestamp in its name).</p>
<p>Optionally, a <code>footer</code> and a <code>header</code> can also be described with the corresponding facets (of type string).</p>
<a class="dashAnchor" name="//apple_ref/Section/Autosave"></a><h2 id="autosave">Autosave</h2>
<p>Image files can be exported also through the <code>autosave</code> facet of the display, as explained in <a href="https://github.com/wiki/gama-platform/gama/Tutorials/LearnGAMLStepByStep/DefiningGUIExperiment/DefiningDisplaysGeneralities#displays-and-layers.html">this previous part</a>.</p>
<script>hljs.initHighlightingOnLoad();</script></body></html>