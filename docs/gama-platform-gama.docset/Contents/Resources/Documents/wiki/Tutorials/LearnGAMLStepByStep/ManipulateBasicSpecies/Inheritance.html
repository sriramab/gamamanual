<html><!-- Online page at https://github.com/gama-platform/gama/wiki/Tutorials/LearnGAMLStepByStep/ManipulateBasicSpecies/Inheritance --><head><meta charset="utf-8"><title>Inheritance</title><script src="../../../../dash_resources/highlight.all.js"></script><link rel="stylesheet" type="text/css" href="../../../../dash_resources/github-markdown.css"><link rel="stylesheet" type="text/css" href="../../../../dash_resources/highlightjs.github.css"></head><body class="markdown-body" style="padding-bottom:20px; margin: 8px 13px;"><h1 id="inheritance">Inheritance</h1>
<h1 dash_ignored="yes" id="inheritance-2">Inheritance</h1>
<p>As for multiple programming language, inheritance can be used in GAML. It is used to structure better your code, when you have some complex models.</p>
<a class="dashAnchor" name="//apple_ref/Section/Index"></a><h2 id="index">Index</h2>
<ul>
<li><a href="#mother-species-/-child-species">Mother species / child species</a></li>
<li><a href="#virtual-actions">Virtual actions</a></li>
<li><a href="#get-all-the-subspecies-from-a-species">Get all the subspecies from a species</a></li>
</ul>
<a class="dashAnchor" name="//apple_ref/Section/Mother%20species%20%2F%20child%20species"></a><h2 id="mother-species--child-species">Mother species / child species</h2>
<p>To make a species inherit from a mother species, you have to add the facet <code>parent</code>, and specify the mother species.</p>
<pre><code class="hljs puppet">species <span class="hljs-keyword"><span class="hljs-keyword">mother_species</span></span> {
}

<span class="hljs-keyword"><span class="hljs-keyword">species</span></span> <span class="hljs-keyword"><span class="hljs-keyword">child_species</span></span> <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">mother_species</span></span> {
}
</code></pre>
<p>Thus, all the attributes, actions and reflex of the mother species are inherited to the child species.</p>
<pre><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">species</span></span> mother_species {
    <span class="hljs-attribute"><span class="hljs-attribute">int</span></span> attribute_A;
    <span class="hljs-attribute"><span class="hljs-attribute">action</span></span> action_A {}
}

<span class="hljs-attribute"><span class="hljs-attribute">species</span></span> child_species parent:mother_species {
    <span class="hljs-section"><span class="hljs-section">init</span></span> {
        <span class="hljs-attribute"><span class="hljs-attribute">attribute_A</span></span> &lt;- <span class="hljs-number"><span class="hljs-number">5</span></span>;
        <span class="hljs-attribute"><span class="hljs-attribute">do</span></span> action_A;
    }
}
</code></pre>
<p>If the mother species has a particular skill, its children will inherit all the attributes and actions.</p>
<pre><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">species</span></span> mother_species skills:[moving] {
}

<span class="hljs-attribute"><span class="hljs-attribute">species</span></span> child_species parent:mother_species {
    <span class="hljs-section"><span class="hljs-section">init</span></span> {
        <span class="hljs-attribute"><span class="hljs-attribute">speed</span></span> &lt;- <span class="hljs-number"><span class="hljs-number">2</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>;
    }
    <span class="hljs-attribute"><span class="hljs-attribute">reflex</span></span> update {
        <span class="hljs-attribute"><span class="hljs-attribute">do</span></span> wander;
    }
}
</code></pre>
<p>You can redefine an action or a reflex by declaring an action or a reflex with the same name.</p>
<a class="dashAnchor" name="//apple_ref/Section/Virtual%20action"></a><h2 id="virtual-action">Virtual action</h2>
<p>You have also the possibility to declare a virtual action in the mother species, which means an action without implementation, by using the facet <code>virtual</code>:</p>
<pre><code class="hljs sqf"><span class="hljs-built_in"><span class="hljs-built_in">action</span></span> virtual_action virtual:<span class="hljs-literal"><span class="hljs-literal">true</span></span>;
</code></pre>
<p>When you declare an action as virtual in a species, this species becomes abstract, which means you cannot instantiate agent from it. All the children of this species has to implement this virtual action.</p>
<pre><code class="hljs puppet">species <span class="hljs-keyword"><span class="hljs-keyword">virtual_mother_species</span></span> {
    action my_action <span class="hljs-built_in"><span class="hljs-built_in">virtual</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>;
}

<span class="hljs-keyword"><span class="hljs-keyword">species</span></span> <span class="hljs-keyword"><span class="hljs-keyword">child_species</span></span> <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">virtual_mother_species</span></span> {
    action my_action {
        // some statements
    }
}
</code></pre>
<a class="dashAnchor" name="//apple_ref/Section/Get%20all%20the%20subspecies%20from%20a%20species"></a><h2 id="get-all-the-subspecies-from-a-species">Get all the subspecies from a species</h2>
<p>If you declare a "mother" species, you create a "child" agent, then "mother" will return the population of agents "mother" and <strong>not</strong> the population of agents "child", as it is shown in the following example : </p>
<pre><code class="hljs puppet"><span class="hljs-keyword"><span class="hljs-keyword">global</span></span>
{
    init {
        create child number:<span class="hljs-number"><span class="hljs-number">2</span></span>;
        create mother number:<span class="hljs-number"><span class="hljs-number">1</span></span>;
    }
    <span class="hljs-keyword"><span class="hljs-keyword">reflex</span></span> <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> {
        write length(mother); // will write <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> not <span class="hljs-number"><span class="hljs-number">3</span></span>
    }
}

species <span class="hljs-keyword"><span class="hljs-keyword">mother</span></span> {}

<span class="hljs-keyword"><span class="hljs-keyword">species</span></span> <span class="hljs-keyword"><span class="hljs-keyword">child</span></span> <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">mother</span></span> {}
</code></pre>
<p>We reminds you that "subspecies" is a built-in attribute of the agent. Using this attribute, you can easily get all the subspecies agents of the mother species by writing the following gaml function : </p>
<pre><code class="hljs dts"><span class="hljs-class"><span class="hljs-class">global
</span></span>{
    <span class="hljs-class"><span class="hljs-class">init </span></span>{
        create child number:<span class="hljs-number"><span class="hljs-number">2</span></span>;
        create mother number:<span class="hljs-number"><span class="hljs-number">1</span></span>;
    }
    reflex <span class="hljs-class"><span class="hljs-class">update </span></span>{
        write length(get_all_instances(mother)); <span class="hljs-comment"><span class="hljs-comment">// will write 3 (1+2)</span></span>
    }
    list<span class="hljs-params"><span class="hljs-params">&lt;agent&gt;</span></span> get_all_instances(species<span class="hljs-params"><span class="hljs-params">&lt;agent&gt;</span></span> spec) {
        return spec.population +  spec.subspecies accumulate (get_all_instances(each));
    }
}

species <span class="hljs-class"><span class="hljs-class">mother </span></span>{}

species child parent:<span class="hljs-class"><span class="hljs-class">mother </span></span>{}
</code></pre>
<script>hljs.initHighlightingOnLoad();</script></body></html>