<html><!-- Online page at https://github.com/gama-platform/gama/wiki/GoldMinerModel_step4 --><head><meta charset="utf-8"><title>GoldMinerModel_step4</title><script src="../dash_resources/highlight.all.js"></script><link rel="stylesheet" type="text/css" href="../dash_resources/github-markdown.css"><link rel="stylesheet" type="text/css" href="../dash_resources/highlightjs.github.css"></head><body class="markdown-body" style="padding-bottom:20px; margin: 8px 13px;"><h1 id="goldminermodel_step4">GoldMinerModel_step4</h1>
<a class="dashAnchor" name="//apple_ref/Section/4.%20Emotions%20and%20Personality"></a><h1 id="4-emotions-and-personality">4. Emotions and Personality</h1>
<p>This fourth step consists in adding emotions that will impact the gold miner agent behavior and defining the personality of the agents.</p>
<a class="dashAnchor" name="//apple_ref/Section/Formulation"></a><h2 id="formulation">Formulation</h2>
<ul>
<li>Definition of global emotions
<ul>
<li>Modification of the miner species to integrate emotions and personality</li>
</ul>
</li>
</ul>
<h2 id="emotions">Emotions</h2>
<p>The BDI architecture of GAMA gives the possibility to generate emotions and to use them in the cognition. The definition of emotions in GAMA is based on the OCC theory of emotions. According to this theory, an emotion is a valued answer to the appraisal of a situation. In GAMA an emotion is represented by a set of 5 elements :</p>
<ul>
<li><em>E</em>: the name of the emotion felt by agent i.</li>
<li><em>P</em>: the predicate that represents the fact about which the emotion is expressed.</li>
<li><em>A</em>: the agent causing the emotion.</li>
<li><em>I</em>: the intensity of the emotion.</li>
<li><em>D</em>: the decay of the emotionâ€™s intensity.</li>
</ul>
<p>The BDI architecture of GAMA integrates a dynamic creation of emotions processe that will create emotions according to the mental states of the agent. More precisely, twenty emotions can be created: eight emotions related to events, four emotions related to other agents and eight emotions related to actions. </p>
<p>The complete description of these emotions and their creation rules can be found in <a href="https://hal.archives-ouvertes.fr/hal-01573384/document">(Bourgais et at., 2017)</a>.</p>
<a class="dashAnchor" name="//apple_ref/Section/Personality"></a><h2 id="personality">Personality</h2>
<p>In order to facilitate the parametrization of the BDI agents, we add the possibility to define all the parameters related to the BDI architecture through the OCEAN model, which proposes to represent the personality of a person according to five factors (correspoding to the 5 variables of the BDI agents):</p>
<ul>
<li><em>O</em>: represents the openness of someone (open-minded/narrow-minded).</li>
<li><em>C</em>: represents the consciousness  of someone (act with preparations/impulsive).</li>
<li><em>E</em>: represents the extroversion of someone (extrovert/shy).</li>
<li><em>A</em>: represents the agreeableness of someone (friendly/hostile).</li>
<li><em>N</em>: represent the degree of control someone has on its emotions (calm/neurotic)
\end{itemize}</li>
</ul>
<p>Each of these variables has a value between 0 and 1. 0.5 represents the neutral value, below 0.5, the value is considered negatively and above 0.5, it is considered positively. For example, someone with a value of 1 for <em>N</em> is considered as calm and someone with a value of 0 for <em>A</em> is considered as hostile.</p>
<a class="dashAnchor" name="//apple_ref/Section/Model%20Definition"></a><h2 id="model-definition">Model Definition</h2>
<h3 dash_ignored="yes" id="emotions-2">emotions</h3>
<p>We add a new global emotion called <em>joy</em> that represents the joy emotion.</p>
<pre><code class="hljs lasso"><span class="hljs-built_in"><span class="hljs-built_in">global</span></span> {
    <span class="hljs-attr"><span class="hljs-attr">...</span></span>
    emotion joy &lt;- new_emotion(<span class="hljs-string"><span class="hljs-string">"joy"</span></span>);
        <span class="hljs-attr"><span class="hljs-attr">...</span></span>
}
</code></pre>
<a class="dashAnchor" name="//apple_ref/Section/emotions%20and%20personality"></a><h3 id="emotions-and-personality">emotions and personality</h3>
<p>To use emotions (and to activate the automatic emotion generation process), we just have to set the value of the built-in variable <em>use_emotions_architecture</em> to true (false by default). In our case, one of the possible desires concerns the predicate <em>has_gold</em>, and when an agent fulfill this desire and find a gold nugget (plan <em>getGold</em>), it gets the belief <em>has_gold</em>, and the emotion engine automatically creates a <em>joy</em> emotion. </p>
<p>To be able to define the parameter of a BDI agent through the OCEAN model, we have to set the value of the built-in variable <em>use_personality</em> to true (false by default). In this model, we chose to use the default value of the <em>O</em>, <em>C</em>, <em>E</em>, <em>A</em> and <em>N</em> variables (default value: 0.5). The interest of using the personality in our case is to allows the emotion engine to give a lifetime to the created emotions (otherwise, the emotions would have a infinite lifetime).</p>
<p>In this model, we only use the emotions to define if the miner agents is going to share or not its knowledge about the gold mines. We consider that the miner only shares information if it has a joy emotion.</p>
<pre><code class="hljs cs">species miner skills: [moving] control:simple_bdi {
        ...
        <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> use_emotions_architecture &lt;- <span class="hljs-literal"><span class="hljs-literal">true</span></span>;
        <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> use_personality &lt;- <span class="hljs-literal"><span class="hljs-literal">true</span></span>;
        
    perceive target:<span class="hljs-function"><span class="hljs-function">goldmine </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">where</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">each.quantity &gt; </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span></span><span class="hljs-function">) </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">in</span></span></span><span class="hljs-function">:viewdist </span></span>{
        focus mine_at_location <span class="hljs-keyword"><span class="hljs-keyword">var</span></span>:location;
        ask myself {
            <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (has_emotion(joy)) {<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">do</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add_desire</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">predicate:share_information, strength: </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5.0</span></span></span></span></span><span class="hljs-function">)</span></span>;}
            <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">do</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove_intention</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">find_gold, </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">false</span></span></span></span></span><span class="hljs-function">)</span></span>;
        }
    }
        ...
}
</code></pre>
<a class="dashAnchor" name="//apple_ref/Section/Complete%20Model"></a><h2 id="complete-model">Complete Model</h2>
<pre><code class="hljs cs">model GoldBdi

global {
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> nb_mines &lt;- <span class="hljs-number"><span class="hljs-number">10</span></span>; 
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> nbminer&lt;<span class="hljs-number"><span class="hljs-number">-5</span></span>;
    market the_market;
    
    <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> mine_at_location &lt;- <span class="hljs-string"><span class="hljs-string">"mine_at_location"</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> empty_mine_location &lt;- <span class="hljs-string"><span class="hljs-string">"empty_mine_location"</span></span>;
    
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> step &lt;- <span class="hljs-number"><span class="hljs-number">10</span></span><span class="hljs-meta"><span class="hljs-meta">#mn;</span></span>
    
    <span class="hljs-comment"><span class="hljs-comment">//possible predicates concerning miners</span></span>
    predicate mine_location &lt;- new_predicate(mine_at_location) ;
    predicate choose_goldmine &lt;- new_predicate(<span class="hljs-string"><span class="hljs-string">"choose a gold mine"</span></span>);
    predicate has_gold &lt;- new_predicate(<span class="hljs-string"><span class="hljs-string">"extract gold"</span></span>);
    predicate find_gold &lt;- new_predicate(<span class="hljs-string"><span class="hljs-string">"find gold"</span></span>) ;
    predicate sell_gold &lt;- new_predicate(<span class="hljs-string"><span class="hljs-string">"sell gold"</span></span>) ;
    predicate share_information &lt;- new_predicate(<span class="hljs-string"><span class="hljs-string">"share information"</span></span>) ;
    
    
    emotion joy &lt;- new_emotion(<span class="hljs-string"><span class="hljs-string">"joy"</span></span>);
    
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> inequality &lt;- <span class="hljs-number"><span class="hljs-number">0.0</span></span> update:standard_deviation(miner collect each.gold_sold);
    
    geometry shape &lt;- square(<span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-meta"><span class="hljs-meta">#km);</span></span>
    init
    {
        create market {
            the_market &lt;- self; 
        }
        create goldmine number:nb_mines;
        create miner number:nbminer;
    }
    
    reflex end_simulation <span class="hljs-keyword"><span class="hljs-keyword">when</span></span>: sum(goldmine collect each.quantity) = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-function"><span class="hljs-function">and </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">empty</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">miner </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">where</span></span></span></span><span class="hljs-function"><span class="hljs-params"> each.has_belief(has_gold</span></span></span><span class="hljs-function">))</span></span>{
        <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> pause;
    }
}

species goldmine {
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> quantity &lt;- rnd(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">20</span></span>);
    aspect <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>
    {
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (quantity = <span class="hljs-number"><span class="hljs-number">0</span></span>) {
            <span class="hljs-function"><span class="hljs-function">draw </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">triangle</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">200</span></span></span></span></span><span class="hljs-function">) color: #gray border: #black</span></span>; 
        } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {
            <span class="hljs-function"><span class="hljs-function">draw </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">triangle</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">200</span></span></span></span><span class="hljs-function"><span class="hljs-params"> + quantity*</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">50</span></span></span></span></span><span class="hljs-function">) color: #yellow border: #black</span></span>; 
        }
     
    }
}

species market {
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> golds;
    aspect <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>
    {
      <span class="hljs-function"><span class="hljs-function">draw </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">square</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1000</span></span></span></span></span><span class="hljs-function">) color: #black </span></span>;
    }
}

species miner skills: [moving] control:simple_bdi {
    
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> viewdist&lt;<span class="hljs-number"><span class="hljs-number">-1000.0</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> speed &lt;- <span class="hljs-number"><span class="hljs-number">2</span></span><span class="hljs-meta"><span class="hljs-meta">#km/#h;</span></span>
    rgb mycolor&lt;-rnd_color(<span class="hljs-number"><span class="hljs-number">255</span></span>);
    point target;
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> gold_sold;
    
        <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> use_social_architecture &lt;- <span class="hljs-literal"><span class="hljs-literal">true</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> use_emotions_architecture &lt;- <span class="hljs-literal"><span class="hljs-literal">true</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> use_personality &lt;- <span class="hljs-literal"><span class="hljs-literal">true</span></span>;
    
    init
    {
        <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">do</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add_desire</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">find_gold</span></span></span><span class="hljs-function">)</span></span>;
    }
    
    perceive target:miner <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>:viewdist {
        socialize liking: <span class="hljs-number"><span class="hljs-number">1</span></span> -  point(mycolor.red, mycolor.green, mycolor.blue) <span class="hljs-function"><span class="hljs-function">distance_to </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">point</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">myself.mycolor.red, myself.mycolor.green, myself.mycolor.blue</span></span></span><span class="hljs-function">) / (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">255</span></span></span></span></span><span class="hljs-function">)</span></span>;
    }
        
    perceive target:<span class="hljs-function"><span class="hljs-function">goldmine </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">where</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">each.quantity &gt; </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span></span><span class="hljs-function">) </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">in</span></span></span><span class="hljs-function">:viewdist </span></span>{
        focus id:mine_at_location <span class="hljs-keyword"><span class="hljs-keyword">var</span></span>:location;
        ask myself {
            <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (has_emotion(joy)) {<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">do</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add_desire</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">predicate:share_information, strength: </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5.0</span></span></span></span></span><span class="hljs-function">)</span></span>;}
            <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">do</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove_intention</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">find_gold, </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">false</span></span></span></span></span><span class="hljs-function">)</span></span>;
        }
    }
    
    rule belief: mine_location new_desire: has_gold strength: <span class="hljs-number"><span class="hljs-number">2.0</span></span>;
    rule belief: has_gold new_desire: sell_gold strength: <span class="hljs-number"><span class="hljs-number">3.0</span></span>;
    
    plan letsWander intention:find_gold 
    {
        <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> wander;
    }
    
    plan getGold intention:has_gold 
    {
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (target = nil) {
            <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">do</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add_subintention</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">has_gold,choose_goldmine, </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">true</span></span></span></span></span><span class="hljs-function">)</span></span>;
            <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">do</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">current_intention_on_hold</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>;
        } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {
            <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> target: target ;
            <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (target = location)  {
                goldmine current_mine&lt;- <span class="hljs-function"><span class="hljs-function">goldmine </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">first_with</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">target = each.location</span></span></span><span class="hljs-function">)</span></span>;
                <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> current_mine.quantity &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> {
                    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">do</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add_belief</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">has_gold</span></span></span><span class="hljs-function">)</span></span>;
                    ask current_mine {quantity &lt;- quantity - <span class="hljs-number"><span class="hljs-number">1</span></span>;}    
                } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {
                    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">do</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add_belief</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">new_predicate(empty_mine_location, [</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"location_value"</span></span></span></span><span class="hljs-function"><span class="hljs-params">::target]</span></span></span><span class="hljs-function">))</span></span>;
                }
                target &lt;- nil;
            }
        }   
    }
    
    plan choose_closest_goldmine intention: choose_goldmine instantaneous: <span class="hljs-literal"><span class="hljs-literal">true</span></span>{
        list&lt;point&gt; possible_mines &lt;- get_beliefs_with_name(mine_at_location) collect (point(get_predicate(mental_state (each)).values[<span class="hljs-string"><span class="hljs-string">"location_value"</span></span>]));
        list&lt;point&gt; empty_mines &lt;- get_beliefs_with_name(empty_mine_location) collect (point(get_predicate(mental_state (each)).values[<span class="hljs-string"><span class="hljs-string">"location_value"</span></span>]));
        possible_mines &lt;- possible_mines - empty_mines;
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (empty(possible_mines)) {
            <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">do</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove_intention</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">has_gold, </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">true</span></span></span></span></span><span class="hljs-function">)</span></span>; 
        } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {
            target &lt;- (<span class="hljs-function"><span class="hljs-function">possible_mines </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">with_min_of</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">each distance_to self</span></span></span><span class="hljs-function">)).location</span></span>;
        }
        <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">do</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove_intention</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">choose_goldmine, </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">true</span></span></span></span></span><span class="hljs-function">)</span></span>; 
    }
    
    plan return_to_base intention: sell_gold {
        <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> target: the_market ;
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (the_market.location = location)  {
            <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">do</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove_belief</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">has_gold</span></span></span><span class="hljs-function">)</span></span>;
            <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">do</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove_intention</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">sell_gold, </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">true</span></span></span></span></span><span class="hljs-function">)</span></span>;
            gold_sold &lt;- gold_sold + <span class="hljs-number"><span class="hljs-number">1</span></span>;
        }
    }
    plan share_information_to_friends intention: share_information instantaneous: <span class="hljs-literal"><span class="hljs-literal">true</span></span>{
        list&lt;miner&gt; my_friends &lt;- list&lt;miner&gt;((<span class="hljs-function"><span class="hljs-function">social_link_base </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">where</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">each.liking &gt; </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span></span><span class="hljs-function">)) collect each.agent)</span></span>;
        loop known_goldmine over: get_beliefs_with_name(mine_at_location) {
            ask my_friends {
                <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">do</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add_belief</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">known_goldmine</span></span></span><span class="hljs-function">)</span></span>;
            }
        }
        loop known_empty_goldmine over: get_beliefs_with_name(empty_mine_location) {
            ask my_friends {
                <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">do</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add_belief</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">known_empty_goldmine</span></span></span><span class="hljs-function">)</span></span>;
            }
        }
        
        <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">do</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove_intention</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">share_information, </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">true</span></span></span></span></span><span class="hljs-function">)</span></span>; 
    }

    aspect <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> {
      <span class="hljs-function"><span class="hljs-function">draw </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">circle</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">200</span></span></span></span></span><span class="hljs-function">) color: mycolor border: #black depth: gold_sold</span></span>;
    }
}


experiment GoldBdi type: gui {
    output {
        display map type: opengl
        {
            species market ;
            species goldmine ;
            species miner;
        }
    }
}
</code></pre>
<p><a href="BDIAgents.html">Back to the start of the tutorial</a></p>
<ol>
<li><a href="GoldMinerModel_step1.html">Creation of the basic model: gold mines and market</a>
<ol>
<li><a href="GoldMinerModel_step2.html">Definition of the BDI miners</a></li>
<li><a href="GoldMinerModel_step3.html">Definition of social relations between miners</a></li>
<li><a href="GoldMinerModel_step5.html">Adding norms, obligations and enforcement</a></li>
</ol>
</li>
</ol>
<script>hljs.initHighlightingOnLoad();</script></body></html>