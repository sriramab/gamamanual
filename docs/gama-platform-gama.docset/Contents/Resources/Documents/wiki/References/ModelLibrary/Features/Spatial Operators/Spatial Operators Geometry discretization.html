<html><!-- Online page at https://github.com/gama-platform/gama/wiki/References/ModelLibrary/Features/Spatial Operators/Spatial Operators Geometry discretization --><head><meta charset="utf-8"><title>Spatial Operators Geometry discretization</title><script src="../../../../../dash_resources/highlight.all.js"></script><link rel="stylesheet" type="text/css" href="../../../../../dash_resources/github-markdown.css"><link rel="stylesheet" type="text/css" href="../../../../../dash_resources/highlightjs.github.css"></head><body class="markdown-body" style="padding-bottom:20px; margin: 8px 13px;"><h1 id="spatial-operators-geometry-discretization">Spatial Operators Geometry discretization</h1>
<h1 id="discretization-of-topology">Discretization of Topology</h1>
<p><em>Author : Patrick Taillandier</em></p>
<p>A model which shows how to use the different convert topologies operators : to_square, to_rectangle, points_on, triangulate, voronoi.</p>
<p>Code of the model : </p>
<pre><code class="hljs processing">
model discretization

global 
{
    <span class="hljs-comment">//Geometry that will be used for each display : a circle</span>
    geometry init_geom &lt;- circle (<span class="hljs-number">35</span>);
}

experiment main type: gui {
    output {
        <span class="hljs-comment">//Display that will show a circle converted in squares</span>
        display decretization_squares {
            graphics <span class="hljs-string">"init_geom"</span> {<span class="hljs-title">draw</span> init_geom <span class="hljs-built_in">color</span>: °black;}
            graphics <span class="hljs-string">"geoms"</span> transparency: <span class="hljs-number">0.5</span>{
                <span class="hljs-comment">//Convert the initial circle into squares of 5.0 </span>
                <span class="hljs-built_in">loop</span> g over: to_squares(init_geom, <span class="hljs-number">5.0</span>) {
                    <span class="hljs-title">draw</span> g <span class="hljs-built_in">color</span>: °<span class="hljs-built_in">red</span>;
                } 
            } 
        }
        <span class="hljs-comment">//Display that will show a circle converted in squares overlapping the shape</span>
        display squares_overlapping {
            graphics <span class="hljs-string">"init_geom"</span> {<span class="hljs-title">draw</span> init_geom <span class="hljs-built_in">color</span>: °black;}
            graphics <span class="hljs-string">"squares"</span> transparency: <span class="hljs-number">0.5</span>{
                <span class="hljs-comment">//Convert the initial circle into rectangles of 5.0 and keep the squares going out of the borders of the circle but still overlapping it</span>
                <span class="hljs-built_in">loop</span> g over: to_squares(init_geom,<span class="hljs-number">5.0</span>, <span class="hljs-keyword">true</span>) {
                    <span class="hljs-title">draw</span> g <span class="hljs-built_in">color</span>: °<span class="hljs-built_in">red</span>;
                } 
            } 
        }
        <span class="hljs-comment">//Display that will show a circle converted in squares inside the shape</span>
        display squares_inside {
            graphics <span class="hljs-string">"init_geom"</span> {<span class="hljs-title">draw</span> init_geom <span class="hljs-built_in">color</span>: °black;}
            graphics <span class="hljs-string">"squares"</span> transparency: <span class="hljs-number">0.5</span>{
                <span class="hljs-comment">//Convert the initial circle into squares of 5.0 and remove the squares going out of the borders of the circle</span>
                <span class="hljs-built_in">loop</span> g over: to_squares(init_geom, <span class="hljs-number">5.0</span>, <span class="hljs-keyword">false</span>) {
                    <span class="hljs-title">draw</span> g <span class="hljs-built_in">color</span>: °<span class="hljs-built_in">red</span>;
                } 
            } 
        }
        <span class="hljs-comment">//Display that will show a circle converted in rectangles with a size of 10.0 and 5.0</span>
        display decretization_rectangles {
            graphics <span class="hljs-string">"init_geom"</span> {<span class="hljs-title">draw</span> init_geom <span class="hljs-built_in">color</span>: °black;}
            graphics <span class="hljs-string">"geoms"</span> transparency: <span class="hljs-number">0.5</span>{
                <span class="hljs-built_in">loop</span> g over: to_rectangles(init_geom, {<span class="hljs-number">10.0</span>,<span class="hljs-number">5.0</span>}) {
                    <span class="hljs-title">draw</span> g <span class="hljs-built_in">color</span>: °<span class="hljs-built_in">red</span>;
                } 
            } 
        }
        <span class="hljs-comment">//Display that will show a circle converted in rectangles forming a grid of 15 cols and 20 rows</span>
        display decretization_rectangles_grid {
            graphics <span class="hljs-string">"init_geom"</span> {<span class="hljs-title">draw</span> init_geom <span class="hljs-built_in">color</span>: °black;}
            graphics <span class="hljs-string">"geoms"</span> transparency: <span class="hljs-number">0.5</span>{
                <span class="hljs-built_in">loop</span> g over: to_rectangles(init_geom, <span class="hljs-number">15</span>,<span class="hljs-number">20</span>) {
                    <span class="hljs-title">draw</span> g <span class="hljs-built_in">color</span>: °<span class="hljs-built_in">red</span>;
                } 
            } 
        }
        <span class="hljs-comment">//Display that will show a circle converted in rectangles overlapping the shape</span>
        display rectangles_overlapping {
            graphics <span class="hljs-string">"init_geom"</span> {<span class="hljs-title">draw</span> init_geom <span class="hljs-built_in">color</span>: °black;}
            graphics <span class="hljs-string">"rectangles"</span> transparency: <span class="hljs-number">0.5</span>{
                <span class="hljs-comment">//Convert the initial circle into rectangles of 5.0 and keep the rectangles going out of the borders of the circle but still overlapping it</span>
                <span class="hljs-built_in">loop</span> g over:  to_rectangles(init_geom, {<span class="hljs-number">10.0</span>,<span class="hljs-number">5.0</span>}, <span class="hljs-keyword">true</span>){
                    <span class="hljs-title">draw</span> g <span class="hljs-built_in">color</span>: °<span class="hljs-built_in">red</span>;
                } 
            } 
        }
        <span class="hljs-comment">//Display that will show a circle converted in rectangles inside the shape</span>
        display rectangles_inside {
            graphics <span class="hljs-string">"init_geom"</span> {<span class="hljs-title">draw</span> init_geom <span class="hljs-built_in">color</span>: °black;}
            graphics <span class="hljs-string">"rectangles"</span> transparency: <span class="hljs-number">0.5</span>{
                <span class="hljs-comment">//Convert the initial circle into rectangles of 5.0 and remove the rectanges going out of the borders of the circle</span>
                <span class="hljs-built_in">loop</span> g over: to_rectangles(init_geom, {<span class="hljs-number">10.0</span>,<span class="hljs-number">5.0</span>}, <span class="hljs-keyword">false</span>) {
                    <span class="hljs-title">draw</span> g <span class="hljs-built_in">color</span>: °<span class="hljs-built_in">red</span>;
                } 
            } 
        }
        
        <span class="hljs-comment">//Display that will show a circle triangulated</span>
        display triangles {
            graphics <span class="hljs-string">"init_geom"</span> {<span class="hljs-title">draw</span> init_geom <span class="hljs-built_in">color</span>: °black;}
            graphics <span class="hljs-string">"triangles"</span> transparency: <span class="hljs-number">0.5</span>{
                <span class="hljs-built_in">loop</span> g over: triangulate(init_geom) {
                    <span class="hljs-title">draw</span> g <span class="hljs-built_in">color</span>: °<span class="hljs-built_in">red</span>;
                }
            } 
        }
        
        <span class="hljs-comment">//Display that will show a circle with points on its perimeter every 10.0</span>
        display points_on_contours {
            graphics <span class="hljs-string">"init_geom"</span> {<span class="hljs-title">draw</span> init_geom <span class="hljs-built_in">color</span>: °black;}
            graphics <span class="hljs-string">"geoms"</span> transparency: <span class="hljs-number">0.5</span>{
                <span class="hljs-built_in">loop</span> g over: points_on(init_geom,<span class="hljs-number">10.0</span>) {
                    <span class="hljs-title">draw</span> circle(<span class="hljs-number">2</span>) at: g <span class="hljs-built_in">color</span>: °<span class="hljs-built_in">red</span>;
                } 
            } 
        }
        
        display voronoi {
            <span class="hljs-comment">//Creates a voronoi diagram from the points given and display them</span>
            graphics <span class="hljs-string">"geoms"</span> transparency: <span class="hljs-number">0.5</span>{
                <span class="hljs-built_in">loop</span> g over: voronoi([{<span class="hljs-number">10</span>,<span class="hljs-number">10</span>},{<span class="hljs-number">10</span>,<span class="hljs-number">10</span>},{<span class="hljs-number">80</span>,<span class="hljs-number">80</span>},{<span class="hljs-number">80</span>,<span class="hljs-number">10</span>},{<span class="hljs-number">10</span>,<span class="hljs-number">80</span>}, {<span class="hljs-number">40</span>,<span class="hljs-number">40</span>}]) {
                    <span class="hljs-title">draw</span> g <span class="hljs-built_in">color</span>: °<span class="hljs-built_in">red</span>;
                }
            }
            graphics <span class="hljs-string">"points"</span> {
                <span class="hljs-built_in">loop</span> pt over: [{<span class="hljs-number">10</span>,<span class="hljs-number">10</span>},{<span class="hljs-number">10</span>,<span class="hljs-number">10</span>},{<span class="hljs-number">80</span>,<span class="hljs-number">80</span>},{<span class="hljs-number">80</span>,<span class="hljs-number">10</span>},{<span class="hljs-number">10</span>,<span class="hljs-number">80</span>}, {<span class="hljs-number">40</span>,<span class="hljs-number">40</span>}] {
                    <span class="hljs-title">draw</span> circle(<span class="hljs-number">2</span>) at: pt <span class="hljs-built_in">color</span>: °black;
                }
            } 
        }
    }
}
</code></pre>
<script>hljs.initHighlightingOnLoad();</script></body></html>