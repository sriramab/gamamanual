<html><!-- Online page at https://github.com/gama-platform/gama/wiki/References/ModelLibrary/Features/Data Importation/Data Importation Grid DEM --><head><meta charset="utf-8"><title>Data Importation Grid DEM</title><script src="../../../../../dash_resources/highlight.all.js"></script><link rel="stylesheet" type="text/css" href="../../../../../dash_resources/github-markdown.css"><link rel="stylesheet" type="text/css" href="../../../../../dash_resources/highlightjs.github.css"></head><body class="markdown-body" style="padding-bottom:20px; margin: 8px 13px;"><h1 id="data-importation-grid-dem">Data Importation Grid DEM</h1>
<h1 id="ascii-file-to-dem-representation">ASCII File to DEM Representation</h1>
<p><em>Author : Arnaud Grignard</em></p>
<p>Model to show how to import a ASCII File to make a DEM Representation and apply a Texture on it. In this model, three experiments are presented : DEM to show the grid elevation using the ASCII File as data for the height of the cells, and showing different 3D displays. GridDEMComplete shows more displays with the three of the previous experiment, the grid of the cells in a 2D Display, with the Elevation but without triangulation, and the grid with text values to show the content of the ASCII used by the cells. GraphicDEMComplete shows the use of the z_factor to amplify or reduces the difference between the z values of a Dem geometry.</p>
<p>Code of the model : </p>
<pre><code class="hljs groovy">
model gridloading

global {
    file grid_data &lt;- file(<span class="hljs-string">"../includes/DEM-Vulcano/vulcano_50.asc"</span>);
    file dem <span class="hljs-string">parameter:</span> <span class="hljs-string">'DEM'</span> &lt;- file(<span class="hljs-string">'../includes/DEM-Vulcano/DEM.png'</span>);
    file texture <span class="hljs-string">parameter:</span> <span class="hljs-string">'Texture'</span> &lt;- file(<span class="hljs-string">'../includes/DEM-Vulcano/Texture.png'</span>);
    geometry shape &lt;- envelope(<span class="hljs-number">200</span>);
    init
    {
        ask cell
        {
            <span class="hljs-keyword">float</span> r;
            <span class="hljs-keyword">float</span> g;
            <span class="hljs-keyword">float</span> b;
            <span class="hljs-keyword">if</span>(grid_value&lt;<span class="hljs-number">20</span>)
            {
                r&lt;- <span class="hljs-number">76</span>+(<span class="hljs-number">26</span>*(grid_value<span class="hljs-number">-7</span>)/<span class="hljs-number">13</span>);
                g&lt;- <span class="hljs-number">153</span>-(<span class="hljs-number">51</span>*(grid_value<span class="hljs-number">-7</span>)/<span class="hljs-number">13</span>);
                b&lt;<span class="hljs-number">-0.0</span>;
            }
            <span class="hljs-keyword">else</span>
            {
                r&lt;- <span class="hljs-number">102</span>+(<span class="hljs-number">122</span>*(grid_value<span class="hljs-number">-20</span>)/<span class="hljs-number">19</span>);
                g&lt;- <span class="hljs-number">51</span>+(<span class="hljs-number">173</span>*(grid_value<span class="hljs-number">-20</span>)/<span class="hljs-number">19</span>);
                b&lt;- <span class="hljs-number">224</span>*(grid_value<span class="hljs-number">-20</span>)/<span class="hljs-number">19</span>;
            }
            self.color&lt;-rgb(r,g,b);
        }
    }
}

grid cell <span class="hljs-string">file:</span> grid_data {
    rgb color;
    reflex decreaseValue {
        grid_value &lt;- grid_value  + rnd (<span class="hljs-number">0.2</span>) - <span class="hljs-number">0.1</span>;
    }
}

experiment DEM <span class="hljs-string">type:</span> gui {
    output {

        <span class="hljs-comment">//Display the grid triangulated in 3D with the cell altitude corresponding to its grid_value and the color cells (if defined otherwise in black)</span>
        display gridWithElevationTriangulated <span class="hljs-string">type:</span> opengl <span class="hljs-string">autosave:</span> <span class="hljs-literal">true</span>{ 
            grid cell <span class="hljs-string">elevation:</span> <span class="hljs-literal">true</span> <span class="hljs-string">triangulation:</span> <span class="hljs-literal">true</span> ;
        }

        <span class="hljs-comment">//Display the grid triangulated in 3D with the cell altitude corresponding to its grid_value and the color of cells as a gray value corresponding to grid_value / maxZ *255</span>
        display gridGrayScaledTriangulated <span class="hljs-string">type:</span> opengl { 
            grid cell <span class="hljs-string">elevation:</span> <span class="hljs-literal">true</span> <span class="hljs-string">grayscale:</span> <span class="hljs-literal">true</span> <span class="hljs-string">triangulation:</span> <span class="hljs-literal">true</span>;
        }

        <span class="hljs-comment">//Display the textured grid in 3D with the cell altitude corresponding to its grid_value.               </span>
        display gridTextured <span class="hljs-string">type:</span> opengl { 
            grid cell <span class="hljs-string">texture:</span> texture <span class="hljs-string">text:</span> <span class="hljs-literal">false</span> <span class="hljs-string">triangulation:</span> <span class="hljs-literal">true</span> <span class="hljs-string">elevation:</span> <span class="hljs-literal">true</span>;
        }
    }

}

experiment GridDEMComplete <span class="hljs-string">type:</span> gui {
    output {

    <span class="hljs-comment">//Display the grid on a plan with cell color (if defined otherwise in black)</span>
        display grid <span class="hljs-string">type:</span> opengl { <span class="hljs-comment">//Same as in java2D</span>
            grid cell;
        }

        <span class="hljs-comment">//Display the grid in 3D with the cell altitude corresponding to its grid_value and the color cells (if defined otherwise in black)</span>
        display gridWithElevation <span class="hljs-string">type:</span> opengl { 
            grid cell <span class="hljs-string">elevation:</span> <span class="hljs-literal">true</span>;
        }

        <span class="hljs-comment">//Display the grid triangulated in 3D with the cell altitude corresponding to its grid_value and the color cells (if defined otherwise in black)</span>
        display gridWithElevationTriangulated <span class="hljs-string">type:</span> opengl { 
            grid cell <span class="hljs-string">elevation:</span> <span class="hljs-literal">true</span> <span class="hljs-string">triangulation:</span> <span class="hljs-literal">true</span> ;
        }

        <span class="hljs-comment">//Display the grid in 3D with the cell altitude corresponding to its grid_value and the color of cells as a gray value corresponding to grid_value / maxZ *255</span>
        display gridGrayScaled <span class="hljs-string">type:</span> opengl { 
            grid cell <span class="hljs-string">elevation:</span> <span class="hljs-literal">true</span> <span class="hljs-string">grayscale:</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-comment">//Display the grid triangulated in 3D with the cell altitude corresponding to its grid_value and the color of cells as a gray value corresponding to grid_value / maxZ *255</span>
        display gridGrayScaledTriangulated <span class="hljs-string">type:</span> opengl { 
            grid cell <span class="hljs-string">elevation:</span> <span class="hljs-literal">true</span> <span class="hljs-string">grayscale:</span> <span class="hljs-literal">true</span> <span class="hljs-string">triangulation:</span> <span class="hljs-literal">true</span>;
        }

        <span class="hljs-comment">//Display the textured grid in 3D with the cell altitude corresponding to its grid_value.               </span>
        display gridTextured <span class="hljs-string">type:</span> opengl { 
            grid cell <span class="hljs-string">texture:</span> texture <span class="hljs-string">text:</span> <span class="hljs-literal">false</span> <span class="hljs-string">triangulation:</span> <span class="hljs-literal">false</span> <span class="hljs-string">elevation:</span> <span class="hljs-literal">true</span>;
        }

        <span class="hljs-comment">//Display the textured triangulated grid in 3D with the cell altitude corresponding to its grid_value.</span>
        display gridTexturedTriangulated <span class="hljs-string">type:</span> opengl { 
            grid cell <span class="hljs-string">texture:</span> texture <span class="hljs-string">text:</span> <span class="hljs-literal">false</span> <span class="hljs-string">triangulation:</span> <span class="hljs-literal">true</span> <span class="hljs-string">elevation:</span> <span class="hljs-literal">true</span>;
        }
        display gridWithText <span class="hljs-string">type:</span> opengl { 
            grid cell <span class="hljs-string">text:</span> <span class="hljs-literal">true</span> <span class="hljs-string">elevation:</span> <span class="hljs-literal">true</span> <span class="hljs-string">grayscale:</span> <span class="hljs-literal">true</span>;
        }
    }

}

experiment GraphicDEMComplete <span class="hljs-string">type:</span> gui {
    output {
        display VulcanoTexturedScaled <span class="hljs-string">type:</span> opengl <span class="hljs-string">draw_env:</span> <span class="hljs-literal">false</span> { 
            graphics <span class="hljs-string">'GraphicPrimitive'</span> {
                draw dem(dem, texture, <span class="hljs-number">0.1</span>);
            }
        } 
        display VulcanoDEMScaled <span class="hljs-string">type:</span> opengl <span class="hljs-string">draw_env:</span> <span class="hljs-literal">false</span> { 
            graphics <span class="hljs-string">'GraphicPrimitive'</span> {
                draw dem(dem, <span class="hljs-number">0.1</span>);
            }
        } 
        display VulcanoTextured <span class="hljs-string">type:</span> opengl <span class="hljs-string">draw_env:</span> <span class="hljs-literal">false</span> { 
            graphics <span class="hljs-string">'GraphicPrimitive'</span> {
                draw dem(dem, texture);
            }
        } 
        display VulcanoDEM <span class="hljs-string">type:</span> opengl <span class="hljs-string">draw_env:</span> <span class="hljs-literal">false</span> { 
            graphics <span class="hljs-string">'GraphicPrimitive'</span> {
                draw dem(dem);
            }
        }
    }
}
</code></pre>
<script>hljs.initHighlightingOnLoad();</script></body></html>