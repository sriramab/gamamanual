<html><!-- Online page at https://github.com/gama-platform/gama/wiki/References/ModelLibrary/Toy Models/Epidemiology/Epidemiology Susceptible Infected (SI) --><head><meta charset="utf-8"><title>Epidemiology Susceptible Infected (SI)</title><script src="../../../../../dash_resources/highlight.all.js"></script><link rel="stylesheet" type="text/css" href="../../../../../dash_resources/github-markdown.css"><link rel="stylesheet" type="text/css" href="../../../../../dash_resources/highlightjs.github.css"></head><body class="markdown-body" style="padding-bottom:20px; margin: 8px 13px;"><h1 id="epidemiology-susceptible-infected-si">Epidemiology Susceptible Infected (SI)</h1>
<h1 id="si-without-ode">SI without ODE</h1>
<p>_Author : _</p>
<p>A simple SI model without Ordinary Differential Equations showing agents moving randomly among a grid and becoming infected</p>
<p>Code of the model : </p>
<pre><code class="hljs cs">
model si

global { 
    
    <span class="hljs-keyword">int</span> number_S &lt;- <span class="hljs-number">495</span>;  <span class="hljs-comment">// The number of susceptible</span>
    <span class="hljs-keyword">int</span> number_I &lt;- <span class="hljs-number">5</span> ; <span class="hljs-comment">// The number of infected</span>
    <span class="hljs-keyword">float</span> survivalProbability &lt;- <span class="hljs-number">1</span>/(<span class="hljs-number">70</span>*<span class="hljs-number">365</span>) ; <span class="hljs-comment">// The survival probability</span>
    <span class="hljs-keyword">float</span> beta &lt;- <span class="hljs-number">0.05</span> ;    <span class="hljs-comment">// The parameter Beta</span>
    <span class="hljs-keyword">float</span> nu &lt;- <span class="hljs-number">0.001</span> ; <span class="hljs-comment">// The parameter Nu</span>
    <span class="hljs-keyword">int</span> numberHosts &lt;- number_S+number_I; <span class="hljs-comment">//Total number of hosts</span>
    <span class="hljs-keyword">bool</span> local_infection &lt;- <span class="hljs-literal">true</span> ; <span class="hljs-comment">//Infection spread locally or not</span>
    <span class="hljs-keyword">int</span> neighbours_size &lt;- <span class="hljs-number">2</span> ; <span class="hljs-comment">//Size of the neighbourhood</span>
    geometry shape &lt;- square(<span class="hljs-number">50</span>);
    init { 
        <span class="hljs-comment">//Creation of all the susceptible hosts</span>
        create Host number: number_S {
            is_susceptible &lt;- <span class="hljs-literal">true</span>;
            is_infected &lt;-  <span class="hljs-literal">false</span>;
            is_immune &lt;-  <span class="hljs-literal">false</span>; 
            color &lt;-  <span class="hljs-meta">#green;</span>
        }
        <span class="hljs-comment">//Creation of all the infected hosts</span>
        create Host number: number_I {
            is_susceptible &lt;-  <span class="hljs-literal">false</span>; 
            is_infected &lt;-  <span class="hljs-literal">true</span>;
            is_immune &lt;-  <span class="hljs-literal">false</span>; 
            color &lt;-  <span class="hljs-meta">#red;  </span>
       }
   }
   <span class="hljs-comment">//Reflex to update the number of infected hosts</span>
   reflex compute_nb_infected {
        number_I &lt;- <span class="hljs-function">Host <span class="hljs-title">count</span> (<span class="hljs-params">each.is_infected</span>)</span>;
   }  
}

<span class="hljs-comment">//Grid to discretize space</span>
grid si_grid width: <span class="hljs-number">50</span> height: <span class="hljs-number">50</span> use_individual_shapes: <span class="hljs-literal">false</span> use_regular_agents: <span class="hljs-literal">false</span> frequency: <span class="hljs-number">0</span>{
    rgb color &lt;- <span class="hljs-meta">#black;</span>
    list&lt;si_grid&gt; neighbours &lt;- (self neighbors_at neighbours_size) ;       
}
<span class="hljs-comment">//Species host which represent the possible hosts of a disease</span>
species Host  {
    <span class="hljs-comment">//Booleans to represent the state of the agent</span>
    <span class="hljs-keyword">bool</span> is_susceptible &lt;- <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">bool</span> is_infected &lt;- <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">bool</span> is_immune &lt;- <span class="hljs-literal">false</span>;
    rgb color &lt;- <span class="hljs-meta">#green;</span>
    <span class="hljs-keyword">int</span> sic_count &lt;- <span class="hljs-number">0</span>;
    si_grid myPlace;
    
    <span class="hljs-comment">//The agent is placed randomly among the grid</span>
    init {
        myPlace &lt;- one_of (si_grid <span class="hljs-keyword">as</span> list);
        location &lt;- myPlace.location;
    }        
    <span class="hljs-comment">//Reflex to move the agents in its neighbourhood</span>
    reflex basic_move {
        myPlace &lt;- one_of (myPlace.neighbours) ;
        location &lt;- myPlace.location;
    }
    <span class="hljs-comment">//Reflex to infect the agent if it is susceptible and according to the other infected agents</span>
    reflex become_infected <span class="hljs-keyword">when</span>: is_susceptible {
        <span class="hljs-keyword">float</span> rate &lt;- <span class="hljs-number">0.0</span>;
        <span class="hljs-keyword">if</span>(local_infection) {
            <span class="hljs-keyword">int</span> nb_hosts &lt;- <span class="hljs-number">0</span>;
            <span class="hljs-keyword">int</span> nb_hosts_infected &lt;- <span class="hljs-number">0</span>;
            loop hst over: ((myPlace.neighbours + myPlace) accumulate (Host overlapping each)) {
                nb_hosts &lt;- nb_hosts + <span class="hljs-number">1</span>;
                <span class="hljs-keyword">if</span> (hst.is_infected) {
                    nb_hosts_infected &lt;- nb_hosts_infected + <span class="hljs-number">1</span>;
                }
            }
            rate &lt;- nb_hosts_infected / nb_hosts;
        } <span class="hljs-keyword">else</span> {
            rate &lt;- number_I / numberHosts;
        }
        <span class="hljs-keyword">if</span> (flip(beta * rate)) {
            is_susceptible &lt;-  <span class="hljs-literal">false</span>;
            is_infected &lt;-  <span class="hljs-literal">true</span>;
            is_immune &lt;-  <span class="hljs-literal">false</span>;
            color &lt;-  <span class="hljs-meta">#red;    </span>
        }
    }
    <span class="hljs-comment">//Reflex to kill the agent according to the death rate</span>
    reflex shallDie <span class="hljs-keyword">when</span>: flip(nu) {
        <span class="hljs-function">create <span class="hljs-title">species</span>(<span class="hljs-params">self</span>) </span>{
            myPlace &lt;- myself.myPlace ;
            location &lt;- myself.location ; 
        }
        <span class="hljs-keyword">do</span> die;
    }
            
    aspect basic {
        <span class="hljs-function">draw <span class="hljs-title">circle</span>(<span class="hljs-params"><span class="hljs-number">1</span></span>) color: color</span>; 
    }
}


experiment Simulation type: gui { 
    parameter <span class="hljs-string">"Number of Susceptible"</span> <span class="hljs-keyword">var</span>: number_S ;<span class="hljs-comment">// The number of susceptible</span>
    parameter <span class="hljs-string">"Number of Infected"</span> <span class="hljs-keyword">var</span>: number_I ;  <span class="hljs-comment">// The number of infected</span>
    parameter <span class="hljs-string">"Survival Probability"</span> <span class="hljs-keyword">var</span>: survivalProbability ; <span class="hljs-comment">// The survival probability</span>
    parameter <span class="hljs-string">"Beta (S-&gt;I)"</span> <span class="hljs-keyword">var</span>:beta;   <span class="hljs-comment">// The parameter Beta</span>
    parameter <span class="hljs-string">"Mortality"</span> <span class="hljs-keyword">var</span>:nu ;  <span class="hljs-comment">// The parameter Nu</span>
    parameter <span class="hljs-string">"Is the infection is computed locally?"</span> <span class="hljs-keyword">var</span>:local_infection ;
    parameter <span class="hljs-string">"Size of the neighbours"</span> <span class="hljs-keyword">var</span>:neighbours_size ;
    
    output { 
        display si_display {
            grid si_grid lines: <span class="hljs-meta">#black;</span>
            species Host aspect: basic;
        }
            
        display chart refresh: every(<span class="hljs-number">10</span>) {
            chart <span class="hljs-string">"Susceptible"</span> type: series background: <span class="hljs-meta">#lightgray style: exploded {</span>
                data <span class="hljs-string">"susceptible"</span> <span class="hljs-keyword">value</span>: <span class="hljs-function">Host <span class="hljs-title">count</span> (<span class="hljs-params">each.is_susceptible</span>) color: #green</span>;
                data <span class="hljs-string">"infected"</span> <span class="hljs-keyword">value</span>: <span class="hljs-function">Host <span class="hljs-title">count</span> (<span class="hljs-params">each.is_infected</span>) color: #red</span>;
            }
        }
            
    }
}
</code></pre>
<script>hljs.initHighlightingOnLoad();</script></body></html>