<html><!-- Online page at https://github.com/gama-platform/gama/wiki/References/ModelLibrary/Tutorials/Road Traffic/Road Traffic Model 02 --><head><meta charset="utf-8"><title>Road Traffic Model 02</title><script src="../../../../../dash_resources/highlight.all.js"></script><link rel="stylesheet" type="text/css" href="../../../../../dash_resources/github-markdown.css"><link rel="stylesheet" type="text/css" href="../../../../../dash_resources/highlightjs.github.css"></head><body class="markdown-body" style="padding-bottom:20px; margin: 8px 13px;"><h1 id="road-traffic-model-02">Road Traffic Model 02</h1>
<h1 id="definition-of-people-agents">Definition of people agents</h1>
<p>second part of the tutorial: Road Traffic</p>
<p>Code of the model : </p>
<pre><code class="hljs mipsasm">
model tutorial_gis_city_traffic

global {
    file <span class="hljs-keyword">shape_file_buildings </span>&lt;- file(<span class="hljs-string">"../includes/building.shp"</span>)<span class="hljs-comment">;</span>
    file <span class="hljs-keyword">shape_file_roads </span>&lt;- file(<span class="hljs-string">"../includes/road.shp"</span>)<span class="hljs-comment">;</span>
    file <span class="hljs-keyword">shape_file_bounds </span>&lt;- file(<span class="hljs-string">"../includes/bounds.shp"</span>)<span class="hljs-comment">;</span>
    geometry <span class="hljs-keyword">shape </span>&lt;- envelope(<span class="hljs-keyword">shape_file_bounds);
</span>    float step &lt;- <span class="hljs-number">10</span> <span class="hljs-comment">#mn;</span>
    int nb_people &lt;- <span class="hljs-number">100</span><span class="hljs-comment">;</span>
    
    init {
        create <span class="hljs-keyword">building </span>from: <span class="hljs-keyword">shape_file_buildings </span>with: [type::string(read (<span class="hljs-string">"NATURE"</span>))] {
            if type=<span class="hljs-string">"Industrial"</span> {
                color &lt;- <span class="hljs-comment">#blue ;</span>
            }
        }
        create road from: <span class="hljs-keyword">shape_file_roads </span><span class="hljs-comment">;</span>
        list&lt;<span class="hljs-keyword">building&gt; </span>residential_buildings &lt;- <span class="hljs-keyword">building </span>where (each.type=<span class="hljs-string">"Residential"</span>)<span class="hljs-comment">;</span>
        create people number: nb_people {
            location &lt;- any_location_in (one_of (residential_buildings))<span class="hljs-comment">;</span>
        }
    }
}

species <span class="hljs-keyword">building </span>{
    string type<span class="hljs-comment">; </span>
    rgb color &lt;- <span class="hljs-comment">#gray  ;</span>
    
    aspect <span class="hljs-keyword">base </span>{
        draw <span class="hljs-keyword">shape </span>color: color <span class="hljs-comment">;</span>
    }
}

species road  {
    rgb color &lt;- <span class="hljs-comment">#black ;</span>
    aspect <span class="hljs-keyword">base </span>{
        draw <span class="hljs-keyword">shape </span>color: color <span class="hljs-comment">;</span>
    }
}

species people {
    rgb color &lt;- <span class="hljs-comment">#yellow ;</span>
    
    aspect <span class="hljs-keyword">base </span>{
        draw circle(<span class="hljs-number">10</span>) color: color<span class="hljs-comment">;</span>
    }
}

experiment road_traffic type: gui {
    parameter <span class="hljs-string">"Shapefile for the buildings:"</span> var: <span class="hljs-keyword">shape_file_buildings </span>category: <span class="hljs-string">"GIS"</span> <span class="hljs-comment">;</span>
    parameter <span class="hljs-string">"Shapefile for the roads:"</span> var: <span class="hljs-keyword">shape_file_roads </span>category: <span class="hljs-string">"GIS"</span> <span class="hljs-comment">;</span>
    parameter <span class="hljs-string">"Shapefile for the bounds:"</span> var: <span class="hljs-keyword">shape_file_bounds </span>category: <span class="hljs-string">"GIS"</span> <span class="hljs-comment">;</span>
    parameter <span class="hljs-string">"Number of people agents"</span> var: nb_people category: <span class="hljs-string">"People"</span> <span class="hljs-comment">;</span>
    
    output {
        <span class="hljs-keyword">display </span>city_display type:opengl {
            species <span class="hljs-keyword">building </span>aspect: <span class="hljs-keyword">base </span><span class="hljs-comment">;</span>
            species road aspect: <span class="hljs-keyword">base </span><span class="hljs-comment">;</span>
            species people aspect: <span class="hljs-keyword">base </span><span class="hljs-comment">;</span>
        }
    }
}
</code></pre>
<script>hljs.initHighlightingOnLoad();</script></body></html>