<html><!-- Online page at https://github.com/gama-platform/gama/wiki/References/ModelLibrary/Features/Clustering/Clustering Clustering --><head><meta charset="utf-8"><title>Clustering Clustering</title><script src="../../../../../dash_resources/highlight.all.js"></script><link rel="stylesheet" type="text/css" href="../../../../../dash_resources/github-markdown.css"><link rel="stylesheet" type="text/css" href="../../../../../dash_resources/highlightjs.github.css"></head><body class="markdown-body" style="padding-bottom:20px; margin: 8px 13px;"><h1 id="clustering-clustering">Clustering Clustering</h1>
<h1 id="clustering-of-agents-by-k-means-and-dbscan">Clustering of agents by K Means and DBScan</h1>
<p><em>Author :  Patrick Taillandier</em></p>
<p>A model to show how to use clustering operators and two methods of clustering (K Means and DBScan) with the goal of regrouping agents in clusters</p>
<p>Code of the model : </p>
<pre><code class="hljs zephir">
model clustering

<span class="hljs-keyword">global</span> {
    <span class="hljs-comment">//the number of groups to create (kmeans)</span>
    <span class="hljs-keyword">int</span> k &lt;- <span class="hljs-number">4</span>;
    
    <span class="hljs-comment">//the maximum radius of the neighborhood (DBscan)</span>
    <span class="hljs-keyword">float</span> eps &lt;- <span class="hljs-number">10.0</span>; 
    
    <span class="hljs-comment">//the minimum number of elements needed for a cluster (DBscan)</span>
    <span class="hljs-keyword">int</span> minPoints &lt;- <span class="hljs-number">3</span>;
    
    init {
        <span class="hljs-comment">//create dummy agents</span>
        create dummy number: <span class="hljs-number">100</span>;
    }
    
    reflex cluster_building {
        <span class="hljs-comment">//create a list of list containing for each dummy agent a list composed of its x and y values</span>
        <span class="hljs-keyword">list</span>&lt;<span class="hljs-keyword">list</span>&gt; instances &lt;- dummy collect ([each.location.x, each.location.y]);
        
        <span class="hljs-comment">//from the previous list, create groups with the eps and minPoints parameters and the DBSCAN algorithm (https://en.wikipedia.org/wiki/DBSCAN)</span>
        <span class="hljs-keyword">list</span>&lt;<span class="hljs-keyword">list</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; clusters_dbscan &lt;- <span class="hljs-keyword">list</span>&lt;<span class="hljs-keyword">list</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;(dbscan(instances, eps,minPoints));
        
        <span class="hljs-comment">//We give a random color to each group (i.e. to each dummy agents of the group)</span>
       loop cluster over: clusters_dbscan {
            rgb col &lt;- rnd_color(<span class="hljs-number">255</span>);
            loop i over: cluster {
                ask dummy[i] {color_dbscan &lt;- col;}
            }
        }
        
        <span class="hljs-comment">//from the previous list, create k groups  with the Kmeans algorithm (https://en.wikipedia.org/wiki/K-means_clustering)</span>
        <span class="hljs-keyword">list</span>&lt;<span class="hljs-keyword">list</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; clusters_kmeans &lt;- <span class="hljs-keyword">list</span>&lt;<span class="hljs-keyword">list</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;(kmeans(instances, k));
        
        <span class="hljs-comment">//We give a random color to each group (i.e. to each dummy agents of the group)</span>
        loop cluster over: clusters_kmeans {
            rgb col &lt;- rnd_color(<span class="hljs-number">255</span>);
            loop i over: cluster {
                ask dummy[i] {color_kmeans &lt;- col;}
            }
        }
    }
    
}

species dummy {
    rgb color_dbscan &lt;- <span class="hljs-comment">#grey;</span>
    rgb color_kmeans &lt;- <span class="hljs-comment">#grey;</span>
    aspect dbscan_aspect {
        draw circle(<span class="hljs-number">2</span>) color: color_dbscan;
    }
    aspect kmeans_aspect {
        draw circle(<span class="hljs-number">2</span>) color: color_kmeans;
    }
}

experiment clustering type: gui {
    parameter <span class="hljs-string">"Number of clusters to split the data into"</span> <span class="hljs-keyword">var</span>: k category: <span class="hljs-string">"KMEANS"</span>;
    parameter <span class="hljs-string">"Maximum radius of the neighborhood to be considered"</span> <span class="hljs-keyword">var</span>: eps category: <span class="hljs-string">"DBSCAN"</span>;
    parameter <span class="hljs-string">"Minimum number of points needed for a cluster "</span> <span class="hljs-keyword">var</span>: minPoints category: <span class="hljs-string">"DBSCAN"</span>;
    output {
        display map_dbscan{
            species dummy aspect: dbscan_aspect;
        }
        display map_kmeans{
            species dummy aspect: kmeans_aspect;
        }
    }
}
</code></pre>
<script>hljs.initHighlightingOnLoad();</script></body></html>