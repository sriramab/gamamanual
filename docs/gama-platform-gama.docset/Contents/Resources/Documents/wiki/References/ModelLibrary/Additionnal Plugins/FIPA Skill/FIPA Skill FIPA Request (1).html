<html><!-- Online page at https://github.com/gama-platform/gama/wiki/References/ModelLibrary/Additionnal Plugins/FIPA Skill/FIPA Skill FIPA Request (1) --><head><meta charset="utf-8"><title>FIPA Skill FIPA Request (1)</title><script src="../../../../../dash_resources/highlight.all.js"></script><link rel="stylesheet" type="text/css" href="../../../../../dash_resources/github-markdown.css"><link rel="stylesheet" type="text/css" href="../../../../../dash_resources/highlightjs.github.css"></head><body class="markdown-body" style="padding-bottom:20px; margin: 8px 13px;"><h1 id="fipa-skill-fipa-request-1">FIPA Skill FIPA Request (1)</h1>
<h1 id="fipa-request">FIPA Request</h1>
<p>This model demontrates a usecase of the FIPA Request interaction protocol. (Please see <a href="http://www.fipa.org/specs/fipa00026/index.html">http://www.fipa.org/specs/fipa00026/index.html</a> for the detail description of this protocol).</p>
<p>The Initiator agent begins the 'fipa-request' conversation/interaction protocol by sending a 'request' message to the Participant agent with 'go sleeping' as content.
On receiving the 'request' message, the Participant agent replies with a 'refuse' message.
After the Initiator reads the 'refuse' message, the 'fipa-request' conversation ends.</p>
<p>Code of the model : </p>
<pre><code class="hljs nginx"><span class="hljs-attribute">model</span> fipa_request_1

global {
    <span class="hljs-attribute">Participant</span> p;
    
    <span class="hljs-section">init</span> {
        <span class="hljs-attribute">create</span> Initiator;
        <span class="hljs-attribute">create</span> Participant returns: ps;
        
         <span class="hljs-attribute">p</span> &lt;- ps at <span class="hljs-number">0</span>;
        
        <span class="hljs-attribute">write</span> <span class="hljs-string">'Step the simulation to observe the outcome in the console'</span>;
    }
}

<span class="hljs-attribute">species</span> Initiator skills: [fipa] {
    <span class="hljs-attribute">reflex</span> print_debug_infor {
        <span class="hljs-attribute">write</span> name + <span class="hljs-string">' with conversations: '</span> + (string(conversations)) + <span class="hljs-string">'; messages: '</span> + (string(mailbox));
    }
    
    <span class="hljs-attribute">reflex</span> send_request when: (time = <span class="hljs-number">1</span>) {
        <span class="hljs-attribute">write</span> <span class="hljs-string">'send message'</span>;
        <span class="hljs-attribute">do</span> start_conversation with: [ to :: [p], protocol :: <span class="hljs-string">'fipa-request'</span>, performative :: <span class="hljs-string">'request'</span>, contents :: [<span class="hljs-string">'go sleeping'</span>] ];
    }
    
    <span class="hljs-attribute">reflex</span> read_refuse_message when: !(empty(refuses)) {
        <span class="hljs-attribute">write</span> <span class="hljs-string">'read refuse messages'</span>;
        <span class="hljs-attribute">loop</span> r over: refuses {
            <span class="hljs-attribute">write</span> <span class="hljs-string">'refuse message with content: '</span> + string(r.contents);
        }
    }
}

<span class="hljs-attribute">species</span> Participant skills: [fipa] {
    <span class="hljs-attribute">reflex</span> print_debug_infor {
        <span class="hljs-attribute">write</span> name + <span class="hljs-string">' with conversations: '</span> + (string(conversations)) + <span class="hljs-string">'; messages: '</span> + (string(mailbox));
    }

    <span class="hljs-attribute">reflex</span> reply_messages when: (!empty(mailbox)) {
        <span class="hljs-attribute">write</span> name + <span class="hljs-string">' sends a refuse message'</span>;
        <span class="hljs-attribute">do</span> refuse with: [ message :: (mailbox at <span class="hljs-number">0</span>), contents :: [<span class="hljs-string">'I don\'t want'</span>] ];
    }
}



<span class="hljs-attribute">experiment</span> test_request_interaction_protocol type: gui {}
</code></pre>
<script>hljs.initHighlightingOnLoad();</script></body></html>