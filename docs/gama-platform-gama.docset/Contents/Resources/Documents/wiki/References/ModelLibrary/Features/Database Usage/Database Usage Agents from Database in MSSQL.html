<html><!-- Online page at https://github.com/gama-platform/gama/wiki/References/ModelLibrary/Features/Database Usage/Database Usage Agents from Database in MSSQL --><head><meta charset="utf-8"><title>Database Usage Agents from Database in MSSQL</title><script src="../../../../../dash_resources/highlight.all.js"></script><link rel="stylesheet" type="text/css" href="../../../../../dash_resources/github-markdown.css"><link rel="stylesheet" type="text/css" href="../../../../../dash_resources/highlightjs.github.css"></head><body class="markdown-body" style="padding-bottom:20px; margin: 8px 13px;"><h1 id="database-usage-agents-from-database-in-mssql">Database Usage Agents from Database in MSSQL</h1>
<h1 id="agents-from-database-in-mssql">Agents from Database in MSSQL</h1>
<p><em>Author : Benoit Gaudou</em></p>
<p>This model does SQl query commands and create agents using the results</p>
<p>Code of the model : </p>
<pre><code class="hljs julia">model DB2agentMSSQL

<span class="hljs-keyword">global</span> {
    map&lt;string,string&gt; BOUNDS &lt;- [  //<span class="hljs-string">"srid"</span><span class="hljs-type">::</span><span class="hljs-string">"32648"</span>, // optinal
                                    <span class="hljs-string">"host"</span><span class="hljs-type">::</span><span class="hljs-string">"localhost"</span>,
                                    <span class="hljs-string">"dbtype"</span><span class="hljs-type">::</span><span class="hljs-string">"sqlserver"</span>,
                                    <span class="hljs-string">"database"</span><span class="hljs-type">::</span><span class="hljs-string">"spatial_DB"</span>,
                                    <span class="hljs-string">"port"</span><span class="hljs-type">::</span><span class="hljs-string">"1433"</span>,
                                    <span class="hljs-string">"user"</span><span class="hljs-type">::</span><span class="hljs-string">"sa"</span>,
                                    <span class="hljs-string">"passwd"</span><span class="hljs-type">::</span><span class="hljs-string">"tmt"</span>,
                                    <span class="hljs-string">"select"</span><span class="hljs-type">::</span><span class="hljs-string">"SELECT GEOM.STAsBinary() as GEOM FROM bounds;"</span> ];
    map&lt;string,string&gt; PARAMS &lt;- [  //<span class="hljs-string">"srid"</span><span class="hljs-type">::</span><span class="hljs-string">"32648"</span>, // optinal
                                    <span class="hljs-string">"host"</span><span class="hljs-type">::</span><span class="hljs-string">"localhost"</span>,
                                    <span class="hljs-string">"dbtype"</span><span class="hljs-type">::</span><span class="hljs-string">"sqlserver"</span>,
                                    <span class="hljs-string">"database"</span><span class="hljs-type">::</span><span class="hljs-string">"spatial_DB"</span>,
                                    <span class="hljs-string">"port"</span><span class="hljs-type">::</span><span class="hljs-string">"1433"</span>,
                                    <span class="hljs-string">"user"</span><span class="hljs-type">::</span><span class="hljs-string">"sa"</span>,
                                    <span class="hljs-string">"passwd"</span><span class="hljs-type">::</span><span class="hljs-string">"tmt"</span>];
    
    string QUERY &lt;- <span class="hljs-string">"SELECT name, type, GEOM.STAsBinary() as GEOM FROM buildings ;"</span>;
    geometry shape &lt;- envelope(BOUNDS);         
    init {
        create DB_accessor {
            create buildings from: (self select [params<span class="hljs-type">::</span> PARAMS, select<span class="hljs-type">::</span> QUERY]) 
                             with:[ <span class="hljs-string">"name"</span><span class="hljs-type">::</span><span class="hljs-string">"name"</span>,<span class="hljs-string">"type"</span><span class="hljs-type">::</span><span class="hljs-string">"type"</span>, <span class="hljs-string">"shape"</span><span class="hljs-type">::</span> geometry(<span class="hljs-string">"geom"</span>)];
         }
    }
}


species DB_accessor skills: [SQLSKILL];
    
species buildings {
    string <span class="hljs-keyword">type</span>;
    aspect default {
        draw shape color: <span class="hljs-comment">#gray ;</span>
    }   
}   

experiment DB2agentMSSQL <span class="hljs-keyword">type</span>: gui {
    output {
        display fullView {
            species buildings aspect: default;
        }
    }
}
</code></pre>
<script>hljs.initHighlightingOnLoad();</script></body></html>