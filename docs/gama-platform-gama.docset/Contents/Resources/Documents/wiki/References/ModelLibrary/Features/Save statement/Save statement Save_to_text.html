<html><!-- Online page at https://github.com/gama-platform/gama/wiki/References/ModelLibrary/Features/Save statement/Save statement Save_to_text --><head><meta charset="utf-8"><title>Save statement Save_to_text</title><script src="../../../../../dash_resources/highlight.all.js"></script><link rel="stylesheet" type="text/css" href="../../../../../dash_resources/github-markdown.css"><link rel="stylesheet" type="text/css" href="../../../../../dash_resources/highlightjs.github.css"></head><body class="markdown-body" style="padding-bottom:20px; margin: 8px 13px;"><h1 id="save-statement-save_to_text">Save statement Save_to_text</h1>
<h1 id="save-to-text">Save to Text</h1>
<p><em>Author : Patrick Taillandier</em></p>
<p>This is a model that shows how to save agents inside a text file to reuse it later or to keep it.</p>
<p>Code of the model : </p>
<pre><code class="hljs http">

<span class="mel">model SavetoText

<span class="hljs-keyword">global</span> {
    init {
        <span class="hljs-comment">//Create the agents that will be saved in the text file.</span>
        create bug number: <span class="hljs-number">50</span>;
    }
    
    <span class="hljs-comment">//Reflex saving the agents every 10 steps. </span>
    reflex save_data when: every(<span class="hljs-number">10</span>){
        <span class="hljs-comment">//save the following text into the given text file. Note that each time the save statement is used, a new line is added at the end of the file.</span>
        save (<span class="hljs-string">"cycle:"</span> + cycle + <span class="hljs-string">", mean size: "</span> + mean(bug collect each.<span class="hljs-keyword">size</span>)) to: <span class="hljs-string">"../results/data.txt"</span>;
    }
    <span class="hljs-comment">//Reflex that will pause the simulation when the number of cycles reach 100.</span>
    reflex end_simulation when: cycle = <span class="hljs-number">100</span> {
        <span class="hljs-keyword">do</span> <span class="hljs-keyword">pause</span>;
    }
}

<span class="hljs-comment">//Species bug that will be saved using the skill moving</span>
species bug skills:[moving]{
    <span class="hljs-keyword">float</span> <span class="hljs-keyword">size</span> &lt;- <span class="hljs-number">1.0</span> + rnd(<span class="hljs-number">4</span>) <span class="hljs-keyword">min</span>: <span class="hljs-number">1.0</span> <span class="hljs-keyword">max</span>: <span class="hljs-number">5.0</span>;
    <span class="hljs-keyword">float</span> speed &lt;- <span class="hljs-number">1.0</span> + rnd(<span class="hljs-number">4.0</span>);
    
    <span class="hljs-comment">//At each step, the size of the agent is update according to the number of bugs close to the agent</span>
    reflex update_size {
        <span class="hljs-keyword">int</span> nb_neigh &lt;- length(bug at_distance <span class="hljs-number">20.0</span>);
        <span class="hljs-keyword">if</span> (nb_neigh &gt; <span class="hljs-number">5</span>) {
            <span class="hljs-keyword">size</span> &lt;- <span class="hljs-keyword">size</span> + <span class="hljs-number">1</span>;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">size</span> &lt;- <span class="hljs-keyword">size</span> - <span class="hljs-number">1</span>;
        }
    }   
    
    <span class="hljs-comment">//Make the agent move randomly</span>
    reflex <span class="hljs-keyword">move</span> {
        <span class="hljs-keyword">do</span> wander;
    }
    
    aspect <span class="hljs-keyword">default</span> {
        draw <span class="hljs-keyword">circle</span>(<span class="hljs-keyword">size</span>) <span class="hljs-keyword">color</span>: #red;
    }
}

experiment main type: gui {
    output {
        display map {
            species bug;
        }
    }
}
</span></code></pre>
<script>hljs.initHighlightingOnLoad();</script></body></html>