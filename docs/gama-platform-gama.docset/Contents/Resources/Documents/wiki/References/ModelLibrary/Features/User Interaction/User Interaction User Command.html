<html><!-- Online page at https://github.com/gama-platform/gama/wiki/References/ModelLibrary/Features/User Interaction/User Interaction User Command --><head><meta charset="utf-8"><title>User Interaction User Command</title><script src="../../../../../dash_resources/highlight.all.js"></script><link rel="stylesheet" type="text/css" href="../../../../../dash_resources/github-markdown.css"><link rel="stylesheet" type="text/css" href="../../../../../dash_resources/highlightjs.github.css"></head><body class="markdown-body" style="padding-bottom:20px; margin: 8px 13px;"><h1 id="user-interaction-user-command">User Interaction User Command</h1>
<h1 id="user-command">User Command</h1>
<p><em>Author : Patrick Taillandier</em></p>
<p>Model which shows how to use the user commands in order to create agents in the display. The user has two possibilities : create one agent, or create a number of agents, with the possibility to change their shape and a pink color. The user also has the possibility to change the color and the shapes of the agents.</p>
<p>Code of the model : </p>
<pre><code class="hljs processing">
model usercommand

global {
    <span class="hljs-comment">//Number of agent to initialise</span>
    <span class="hljs-built_in">int</span> nbAgent &lt;- <span class="hljs-number">1</span>;
    
    init {
        <span class="hljs-comment">//Create the agent</span>
        create cell number: nbAgent {
            <span class="hljs-built_in">color</span> &lt;-°<span class="hljs-built_in">green</span>;
        }
    }
    
    <span class="hljs-comment">//These commands are displayed in the world layer</span>
    <span class="hljs-comment">//User command to create an agent according to the location where the user right click</span>
    user_command <span class="hljs-string">"Create an agent"</span> {
        create cell number: nbAgent with: [location::user_location]  {
            <span class="hljs-built_in">color</span> &lt;-°<span class="hljs-built_in">green</span>;
        } 
    }
    <span class="hljs-comment">//User command to create a given number of agents according</span>
    user_command <span class="hljs-string">"Create agents"</span> {
         <span class="hljs-built_in">map</span> input_values &lt;- user_input([<span class="hljs-string">"Number"</span> :: nbAgent, <span class="hljs-string">"shape"</span> :: <span class="hljs-string">"circle"</span>]);
         create cell number: <span class="hljs-built_in">int</span>(input_values at <span class="hljs-string">"Number"</span>) with: [<span class="hljs-built_in">color</span>:: °pink, is_square:: string(input_values at <span class="hljs-string">"shape"</span>) = <span class="hljs-string">"square"</span>];
    }
    
}

<span class="hljs-comment">//Species that will be used</span>
species cell {
    rgb <span class="hljs-built_in">color</span>;  
    bool is_square &lt;- <span class="hljs-keyword">false</span>; 
    
    <span class="hljs-comment">//These commands will be displayed in the cells layer, after right clicking on a agent</span>
    user_command <span class="hljs-string">"change color"</span>action: change_color;
    user_command <span class="hljs-string">"change shape"</span> action: change_shape;
    
    <span class="hljs-comment">//Action to change the color of the agent triggered by change color user command</span>
    action change_color 
    {
     <span class="hljs-built_in">color</span> &lt;- <span class="hljs-built_in">color</span> = °<span class="hljs-built_in">green</span> ? °pink : °<span class="hljs-built_in">green</span>;
    } 
    <span class="hljs-comment">//Action to change the shape of the agent triggered by change shape user command</span>
    action change_shape
    {
       is_square &lt;- not (is_square);
    }
    aspect <span class="hljs-keyword">default</span> {
        <span class="hljs-title">draw</span> is_square ? square(<span class="hljs-number">2</span>): circle(<span class="hljs-number">1</span>) <span class="hljs-built_in">color</span>: <span class="hljs-built_in">color</span>;
    }
}


experiment Displays type: gui {
    output {
        display <span class="hljs-built_in">map</span> { 
            species cell;
        }
    }
}
</code></pre>
<script>hljs.initHighlightingOnLoad();</script></body></html>