<html><!-- Online page at https://github.com/gama-platform/gama/wiki/References/ModelLibrary/Features/Unit Test/Unit Test Two Species (Example) --><head><meta charset="utf-8"><title>Unit Test Two Species (Example)</title><script src="../../../../../dash_resources/highlight.all.js"></script><link rel="stylesheet" type="text/css" href="../../../../../dash_resources/github-markdown.css"><link rel="stylesheet" type="text/css" href="../../../../../dash_resources/highlightjs.github.css"></head><body class="markdown-body" style="padding-bottom:20px; margin: 8px 13px;"><h1 id="unit-test-two-species-example">Unit Test Two Species (Example)</h1>
<h1 id="example-of-unit-test">Example of Unit Test</h1>
<p><em>Author : Benoit Gaudou</em></p>
<p>The model creates 10 agents at initialization, kills one agent at each step. </p>
<ul>
<li>With the assert we want to ensure that the test_species1 population always contains more than 5 agents. </li>
<li>After four steps the population is below 6 so Errors are raisen. You have to go in the Views, Preferences, Simulation, in "Errors" Uncheck "stop at the first error", to show all the errors.</li>
</ul>
<p>Code of the model : </p>
<pre><code class="hljs http">

<span class="bash">model <span class="hljs-built_in">test</span>_unitTest_framework

global {
    init {
        //Create agents : one to <span class="hljs-built_in">test</span> the population of <span class="hljs-built_in">test</span>_species1 and the <span class="hljs-built_in">test</span>_species1 agents
        create <span class="hljs-built_in">test</span>_species2 number: 1;
        create <span class="hljs-built_in">test</span>_species1 number: 10;
    }
    //At each step, one of the agents of <span class="hljs-built_in">test</span>_species1 dies
    reflex one_should_die {
        ask one_of(<span class="hljs-built_in">test</span>_species1){
            <span class="hljs-keyword">do</span> die;
        }
    }
}


species <span class="hljs-built_in">test</span>_species2 {
    //The step is computed each step to <span class="hljs-built_in">test</span> <span class="hljs-keyword">if</span> there is still at least 5 agents of <span class="hljs-built_in">test</span>_species1
    <span class="hljs-built_in">test</span> t1 {
        assert (length(<span class="hljs-built_in">test</span>_species1) &gt; 5) equals: <span class="hljs-literal">true</span>;
    }
}

species <span class="hljs-built_in">test</span>_species1 {
}


experiment new <span class="hljs-built_in">type</span>: gui {}
</span></code></pre>
<script>hljs.initHighlightingOnLoad();</script></body></html>