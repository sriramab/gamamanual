<html><!-- Online page at https://github.com/gama-platform/gama/wiki/References/ModelLibrary/Tutorials/3D/3D Model 03 --><head><meta charset="utf-8"><title>3D Model 03</title><script src="../../../../../dash_resources/highlight.all.js"></script><link rel="stylesheet" type="text/css" href="../../../../../dash_resources/github-markdown.css"><link rel="stylesheet" type="text/css" href="../../../../../dash_resources/highlightjs.github.css"></head><body class="markdown-body" style="padding-bottom:20px; margin: 8px 13px;"><h1 id="3d-model-03">3D Model 03</h1>
<h1 id="moving-cells-with-neighbors">Moving cells with neighbors</h1>
<p><em>Author : Arnaud Grignard</em></p>
<p>Third part of the tutorial : Tuto3D</p>
<p>Code of the model : </p>
<pre><code class="hljs mipsasm">
model Tuto3D

global {
  int nb_cells &lt;-<span class="hljs-number">100</span><span class="hljs-comment">;</span>
  int environmentSize &lt;-<span class="hljs-number">100</span><span class="hljs-comment">;</span>
  geometry <span class="hljs-keyword">shape </span>&lt;- cube(environmentSize)<span class="hljs-comment">;  </span>
  init { 
    create cells number: nb_cells { 
      location &lt;- {rnd(environmentSize), rnd(environmentSize), rnd(environmentSize)}<span class="hljs-comment">;       </span>
    } 
  }  
} 
    
species cells skills: [moving3D] {  
    rgb color<span class="hljs-comment">;</span>
    list&lt;cells&gt; neighbors<span class="hljs-comment">;</span>
    int offset<span class="hljs-comment">;</span>
    
    reflex <span class="hljs-keyword">move </span>{
      do wander<span class="hljs-comment">;    </span>
    }   
    
    reflex computeNeighbors {
      neighbors &lt;- cells select ((each <span class="hljs-keyword">distance_to </span>self) &lt; <span class="hljs-number">10</span>)<span class="hljs-comment">;</span>
    }
        
    aspect default {
        draw sphere(environmentSize*<span class="hljs-number">0</span>.<span class="hljs-number">01</span>) color:<span class="hljs-comment">#orange;</span>
        loop pp over: neighbors {
            draw line([self.location,pp.location])<span class="hljs-comment">;</span>
        }   
    }
}


experiment Tuto3D  type: gui {
  parameter <span class="hljs-string">"Initial number of cells: "</span> var: nb_cells min: <span class="hljs-number">1</span> max: <span class="hljs-number">1000</span> category: <span class="hljs-string">"Cells"</span> <span class="hljs-comment">;</span>
  output {
    <span class="hljs-keyword">display </span>View1 type:opengl <span class="hljs-keyword">background:rgb(10,40,55){
</span>      graphics <span class="hljs-string">"env"</span>{
        draw cube(environmentSize) color: <span class="hljs-comment">#black empty:true;    </span>
      }
      species cells<span class="hljs-comment">;</span>
    }
  }  
}

</code></pre>
<script>hljs.initHighlightingOnLoad();</script></body></html>